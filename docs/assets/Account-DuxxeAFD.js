import{d as U,c as P,e as r,b as m,f as h,w as u,o as c,g as f,F as M,j as I,k as ue,S as re,i as G,t as C,_ as F,r as v,l as L,a as oe,m as A,n as se,p as B}from"./index-W50bq435.js";const de={class:"table-header"},me={class:"table-operations"},ce={class:"select-container"},pe={class:"select-container"},ve={class:"select-container"},fe={class:"select-container"},ye={class:"select-container"},ge={class:"select-container"},he=U({__name:"AccountHeader",props:{filterRole:String,filterMembershipType:String,filterMembershipPayment:String,filter4GPlan:String,filter4GPayment:String,filterDeviceStatus:String,searchText:String,uniqueRoles:{type:Array,default:()=>[]},uniqueMembershipTypes:{type:Array,default:()=>[]},uniqueMembershipPayments:{type:Array,default:()=>[]},uniqueFourGPlans:{type:Array,default:()=>[]},uniqueFourGPayments:{type:Array,default:()=>[]},uniqueDeviceStatuses:{type:Array,default:()=>[]}},emits:["update:filterRole","update:filterMembershipType","update:filterMembershipPayment","update:filter4GPlan","update:filter4GPayment","update:filterDeviceStatus","update:searchText","search","refresh","configure-columns","show-info","apply-filters"],setup(o,{emit:q}){return(d,e)=>{const y=h("AccountTitle"),s=h("a-select-option"),g=h("a-select"),b=h("a-input-search"),w=h("a-button"),T=h("a-tooltip"),S=h("a-space");return c(),P("div",de,[r(y),m("div",me,[r(S,{size:12},{default:u(()=>[m("div",ce,[e[10]||(e[10]=m("span",{class:"select-always-placeholder"},"IP角色",-1)),r(g,{value:o.filterRole,onChange:e[0]||(e[0]=t=>d.$emit("update:filterRole",t)),style:{width:"108px"}},{default:u(()=>[r(s,{value:"all"},{default:u(()=>e[9]||(e[9]=[f("全部")])),_:1,__:[9]}),(c(!0),P(M,null,I(o.uniqueRoles,t=>(c(),G(s,{key:t,value:t},{default:u(()=>[f(C(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),m("div",pe,[e[12]||(e[12]=m("span",{class:"select-always-placeholder"},"会员类型",-1)),r(g,{value:o.filterMembershipType,onChange:e[1]||(e[1]=t=>d.$emit("update:filterMembershipType",t)),style:{width:"108px"}},{default:u(()=>[r(s,{value:"all"},{default:u(()=>e[11]||(e[11]=[f("全部")])),_:1,__:[11]}),(c(!0),P(M,null,I(o.uniqueMembershipTypes,t=>(c(),G(s,{key:t,value:t},{default:u(()=>[f(C(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),m("div",ve,[e[14]||(e[14]=m("span",{class:"select-always-placeholder"},"会员付费",-1)),r(g,{value:o.filterMembershipPayment,onChange:e[2]||(e[2]=t=>d.$emit("update:filterMembershipPayment",t)),style:{width:"108px"}},{default:u(()=>[r(s,{value:"all"},{default:u(()=>e[13]||(e[13]=[f("全部")])),_:1,__:[13]}),(c(!0),P(M,null,I(o.uniqueMembershipPayments,t=>(c(),G(s,{key:t,value:t},{default:u(()=>[f(C(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),m("div",fe,[e[16]||(e[16]=m("span",{class:"select-always-placeholder"},"4G套餐",-1)),r(g,{value:o.filter4GPlan,onChange:e[3]||(e[3]=t=>d.$emit("update:filter4GPlan",t)),style:{width:"108px"}},{default:u(()=>[r(s,{value:"all"},{default:u(()=>e[15]||(e[15]=[f("全部")])),_:1,__:[15]}),(c(!0),P(M,null,I(o.uniqueFourGPlans,t=>(c(),G(s,{key:t,value:t},{default:u(()=>[f(C(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),m("div",ye,[e[18]||(e[18]=m("span",{class:"select-always-placeholder"},"4G付费",-1)),r(g,{value:o.filter4GPayment,onChange:e[4]||(e[4]=t=>d.$emit("update:filter4GPayment",t)),style:{width:"108px"}},{default:u(()=>[r(s,{value:"all"},{default:u(()=>e[17]||(e[17]=[f("全部")])),_:1,__:[17]}),(c(!0),P(M,null,I(o.uniqueFourGPayments,t=>(c(),G(s,{key:t,value:t},{default:u(()=>[f(C(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),m("div",ge,[e[20]||(e[20]=m("span",{class:"select-always-placeholder"},"设备状态",-1)),r(g,{value:o.filterDeviceStatus,onChange:e[5]||(e[5]=t=>d.$emit("update:filterDeviceStatus",t)),style:{width:"108px"}},{default:u(()=>[r(s,{value:"all"},{default:u(()=>e[19]||(e[19]=[f("全部")])),_:1,__:[19]}),(c(!0),P(M,null,I(o.uniqueDeviceStatuses,t=>(c(),G(s,{key:t,value:t},{default:u(()=>[f(C(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),r(b,{value:o.searchText,placeholder:"请输入关键字搜索",style:{width:"120px"},onSearch:e[6]||(e[6]=t=>d.$emit("update:searchText",t)),onInput:e[7]||(e[7]=t=>d.$emit("update:searchText",t.target.value))},null,8,["value"]),r(T,{title:"Configure Columns"},{default:u(()=>[r(w,{onClick:e[8]||(e[8]=t=>d.$emit("configure-columns"))},{icon:u(()=>[r(ue(re))]),_:1})]),_:1})]),_:1})])])}}}),be=F(he,[["__scopeId","data-v-da7b7e98"]]),Se=U({__name:"AccountTable",props:{columns:{type:Array,required:!0},data:{type:Array,required:!0},loading:Boolean,pagination:{type:Object,required:!0}},emits:["change","update:data"],setup(o,{emit:q}){const d=o,e=v([]);return L(()=>d.data,y=>{e.value=[...y]},{immediate:!0}),(y,s)=>{const g=h("a-table");return c(),G(g,{columns:o.columns,"data-source":o.data,loading:o.loading,pagination:o.pagination,onChange:s[0]||(s[0]=b=>y.$emit("change",b)),scroll:{x:2660},"row-key":"key"},null,8,["columns","data-source","loading","pagination"])}}}),Pe=F(Se,[["__scopeId","data-v-cf390741"]]),we={class:"account-title-container"},Te=U({__name:"AccountTitle",setup(o){return(q,d)=>(c(),P("div",we,d[0]||(d[0]=[m("h2",null,"账户信息",-1)])))}}),ke=F(Te,[["__scopeId","data-v-cb8df63c"]]),xe={class:"account-container"},Ae=U({__name:"Account",setup(o){const q=v([]),d=v(!1),e=oe({current:1,pageSize:5,total:0,showTotal:l=>`第 ${(e.current-1)*e.pageSize+1}-${Math.min(e.current*e.pageSize,l)}条/共 ${l} 条`,showSizeChanger:!0,pageSizeOptions:["5","10","20","50","100"]}),y=v([]),s=v(""),g=v(""),b=v("all"),w=v("all"),T=v("all"),S=v("all"),t=v("all"),k=v("all"),x=v("");L([b,w,T,S,t,k,x,()=>e.current,()=>e.pageSize],()=>{console.log("Account.vue: Watcher triggered. filter4GPlan before fetchData (in watch):",S.value),e.current=1,B(()=>D())});const E=A(()=>[...new Set(y.value.map(l=>l.ipRole))]),V=A(()=>[...new Set(y.value.map(l=>l.membershipType))]),j=A(()=>[...new Set(y.value.map(l=>l.membershipPaymentStatus))]),H=A(()=>[...new Set(y.value.map(l=>l.fourGPlan))]),K=A(()=>[...new Set(y.value.map(l=>l.fourGPaymentStatus))]),W=A(()=>[...new Set(y.value.map(l=>l.deviceStatus))]),$=[{title:"序号",dataIndex:"serialNumber",key:"serialNumber",sorter:!0,width:80},{title:"账户ID",dataIndex:"accountId",key:"accountId",sorter:!0,width:120},{title:"手机号",dataIndex:"phoneNumber",key:"phoneNumber",sorter:!0,width:120},{title:"设备型号",dataIndex:"deviceModel",key:"deviceModel",sorter:!0,width:120},{title:"设备ID",dataIndex:"deviceId",key:"deviceId",sorter:!0,width:120},{title:"IP角色",dataIndex:"ipRole",key:"ipRole",sorter:!0,width:120},{title:"产品型号",dataIndex:"productModel",key:"productModel",sorter:!0,width:120},{title:"会员类型",dataIndex:"membershipType",key:"membershipType",sorter:!0,width:120},{title:"会员付费",dataIndex:"membershipPaymentStatus",key:"membershipPaymentStatus",sorter:!0,width:120},{title:"会员激活时间",dataIndex:"membershipActivationTime",key:"membershipActivationTime",sorter:!0,width:140},{title:"会员到期时间",dataIndex:"membershipExpirationTime",key:"membershipExpirationTime",sorter:!0,width:140},{title:"4G套餐",dataIndex:"fourGPlan",key:"fourGPlan",sorter:!0,width:100},{title:"当月剩余流量",dataIndex:"remainingData",key:"remainingData",sorter:!0,width:160},{title:"4G付费",dataIndex:"fourGPaymentStatus",key:"4GPaymentStatus",sorter:!0,width:100},{title:"服务年费用 (元)",dataIndex:"annualServiceFee",key:"annualServiceFee",sorter:!0,width:160},{title:"ASR年用量",dataIndex:"asrAnnualUsage",key:"asrAnnualUsage",sorter:!0,width:120},{title:"LLM年用量",dataIndex:"llmAnnualUsage",key:"llmAnnualUsage",sorter:!0,width:120},{title:"TTS年用量",dataIndex:"ttsAnnualUsage",key:"ttsAnnualUsage",sorter:!0,width:120},{title:"音色克隆年用量",dataIndex:"voiceCloningAnnualUsage",key:"voiceCloningAnnualUsage",sorter:!0,width:160},{title:"创建时间",dataIndex:"creationTime",key:"creationTime",sorter:!0,width:120},{title:"设备状态",dataIndex:"deviceStatus",key:"deviceStatus",sorter:!0,width:120,fixed:"right"}],_=v($.map(l=>l.key)),J=v($.map(l=>l.key)),R=v(!1),Q=A(()=>J.value.map(a=>$.find(p=>p.key===a)).filter(a=>a!==void 0).filter(a=>_.value.includes(a.key))),X=()=>{R.value=!0},O=()=>{R.value=!1},Y=()=>{alert("Account Information Page - Info")},Z=()=>{console.log("Applying filters...",{filterRole:b.value,filterMembershipType:w.value,filterMembershipPayment:T.value,filter4GPlan:S.value,filter4GPayment:t.value,filterDeviceStatus:k.value,searchText:x.value}),e.current=1,B(()=>D())},ee=()=>{_.value=$.map(l=>l.key)},D=async()=>{d.value=!0,console.log("Account.vue: fetchData called."),console.log("  filterRole:",b.value),console.log("  filterMembershipType:",w.value),console.log("  filterMembershipPayment:",T.value),console.log("  filter4GPlan (inside fetchData):",S.value),console.log("  filter4GPayment:",t.value),console.log("  filterDeviceStatus:",k.value),console.log("  searchText:",x.value),console.log("  Pagination:",e.current,e.pageSize),console.log("Fetching data with filters:",s.value,g.value),await new Promise(p=>setTimeout(p,1e3));const l=Array.from({length:50}).map((p,n)=>({key:`item-${n}`,serialNumber:n+1,accountId:`acc-${n+1}`,phoneNumber:`1380000${String(n).padStart(4,"0")}`,deviceModel:`Model ${n%5}`,deviceId:`dev-${n+1e3}`,ipRole:n%2===0?"Admin":"User",productModel:`Prod ${n%3}`,membershipType:n%2===0?"Premium":"Standard",membershipPaymentStatus:n%2===0?"Paid":"Unpaid",membershipActivationTime:`2023-01-${String(n%30+1).padStart(2,"0")}`,membershipExpirationTime:`2024-01-${String(n%30+1).padStart(2,"0")}`,fourGPlan:n%3===0?"Unlimited":"Limited",remainingData:`${(100-n).toFixed(2)} GB`,fourGPaymentStatus:n%3===0?"Active":"Inactive",annualServiceFee:(n+1)*100,asrAnnualUsage:`${(n*10).toFixed(2)} hrs`,llmAnnualUsage:`${(n*50).toFixed(2)} tokens`,ttsAnnualUsage:`${(n*20).toFixed(2)} hrs`,voiceCloningAnnualUsage:`${(n*5).toFixed(2)} clones`,creationTime:`2022-12-${String(n%31+1).padStart(2,"0")}`,deviceStatus:n%2===0?"Online":"Offline"}));y.value=l;const a=y.value.filter(p=>{const n=b.value==="all"||p.ipRole===b.value,z=w.value==="all"||p.membershipType===w.value,N=T.value==="all"||p.membershipPaymentStatus===T.value,i=S.value==="all"||p.fourGPlan===S.value,ae=t.value==="all"||p.fourGPaymentStatus===t.value,le=k.value==="all"||p.deviceStatus===k.value,ne=!x.value||Object.values(p).some(ie=>String(ie).toLowerCase().includes(x.value.toLowerCase()));return n&&z&&N&&i&&ae&&le&&ne});console.log("Filtered data length:",a.length),console.log("Sample filtered data (first 5 items):",a.slice(0,5)),q.value=a.slice((e.current-1)*e.pageSize,e.current*e.pageSize),e.total=a.length,d.value=!1},te=(l,a,p)=>{e.current=l.current,e.pageSize=l.pageSize,console.log("Table change - Pagination:",l),console.log("Table change - Filters:",a),console.log("Table change - Sorter:",p)};return se(()=>{D()}),(l,a)=>{const p=h("a-button"),n=h("a-checkbox"),z=h("a-checkbox-group"),N=h("a-modal");return c(),P("div",xe,[r(ke),r(be,{"filter-device-model":s.value,"onUpdate:filterDeviceModel":a[0]||(a[0]=i=>{s.value=i}),"filter-manufacturer":g.value,"onUpdate:filterManufacturer":a[1]||(a[1]=i=>{g.value=i}),"filter-device-status":k.value,"onUpdate:filterDeviceStatus":a[2]||(a[2]=i=>{k.value=i}),"unique-roles":E.value,"unique-membership-types":V.value,"filter-membership-type":w.value,"onUpdate:filterMembershipType":a[3]||(a[3]=i=>{w.value=i}),"unique-membership-payments":j.value,"filter-membership-payment":T.value,"onUpdate:filterMembershipPayment":a[4]||(a[4]=i=>{T.value=i}),"unique-four-g-plans":H.value,"filter-four-g-plan":S.value,"onUpdate:filterFourGPlan":a[5]||(a[5]=i=>{S.value=i,console.log("Account.vue: @update:filter4GPlan received",i)}),"unique-four-g-payments":K.value,"unique-device-statuses":W.value,searchText:x.value,"onUpdate:searchText":a[6]||(a[6]=i=>{x.value=i}),onRefresh:D,onConfigureColumns:X,onShowInfo:Y,onApplyFilters:Z,"filter-role":b.value,"onUpdate:filterRole":a[7]||(a[7]=i=>b.value=i)},null,8,["filter-device-model","filter-manufacturer","filter-device-status","unique-roles","unique-membership-types","filter-membership-type","unique-membership-payments","filter-membership-payment","unique-four-g-plans","filter-four-g-plan","unique-four-g-payments","unique-device-statuses","searchText","filter-role"]),r(Pe,{columns:Q.value,data:q.value,loading:d.value,pagination:e,onChange:te,"onUpdate:data":a[8]||(a[8]=i=>{q.value=i})},null,8,["columns","data","loading","pagination"]),r(N,{title:"Configure Table Columns",visible:R.value,onCancel:O,onOk:O},{default:u(()=>[m("div",null,[m("h3",null,[a[11]||(a[11]=f(" Visible Columns ")),r(p,{type:"link",onClick:ee,style:{float:"right"}},{default:u(()=>a[10]||(a[10]=[f("Select All")])),_:1,__:[10]})]),r(z,{value:_.value,"onUpdate:value":a[9]||(a[9]=i=>_.value=i)},{default:u(()=>[(c(),P(M,null,I($,i=>m("div",{key:i.key},[r(n,{value:i.key},{default:u(()=>[f(C(i.title),1)]),_:2},1032,["value"])])),64))]),_:1},8,["value"])])]),_:1},8,["visible"])])}}}),Ie=F(Ae,[["__scopeId","data-v-6b04d31c"]]);export{Ie as default};
