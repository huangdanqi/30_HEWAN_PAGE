import{d as U,c as b,o as m,_ as O,b as p,e as l,f as d,w as r,g as T,F as q,k as S,l as L,R as P,S as j,i as $,t as I,q as H,r as g,a as E,m as K,n as G,j as J,h as W}from"./index-DoRwA-S_.js";const X={class:"page-title"},Y=U({__name:"LogQueryTitle",setup(v){return(k,y)=>(m(),b("h2",X,"日志查询"))}}),Z=O(Y,[["__scopeId","data-v-ffca5915"]]),ee={class:"log-query-header"},te={class:"filter-section"},ae={class:"select-container"},ne={class:"select-container"},oe={class:"select-container"},le={class:"action-section"},se=U({__name:"LogQueryHeader",props:{searchText:{default:""},filterOperationType:{default:"all"},filterUser:{default:"all"},dateRange:{default:()=>["",""]},uniqueOperationTypes:{default:()=>[]},uniqueUsers:{default:()=>[]}},emits:["update:searchText","update:filterOperationType","update:filterUser","update:dateRange","search","refresh","configure-columns"],setup(v,{emit:k}){return console.log(v),(a,e)=>{const u=d("a-select-option"),c=d("a-select"),_=d("a-range-picker"),h=d("a-input-search"),C=d("a-button");return m(),b("div",ee,[p("div",te,[p("div",ae,[e[8]||(e[8]=p("span",{class:"select-always-placeholder"},"操作类型:",-1)),l(c,{value:a.filterOperationType,onChange:e[0]||(e[0]=t=>a.$emit("update:filterOperationType",t)),style:{width:"120px"}},{default:r(()=>[l(u,{value:"all"},{default:r(()=>e[7]||(e[7]=[T("全部")])),_:1,__:[7]}),(m(!0),b(q,null,S(a.uniqueOperationTypes,t=>(m(),$(u,{key:t,value:t},{default:r(()=>[T(I(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),p("div",ne,[e[10]||(e[10]=p("span",{class:"select-always-placeholder"},"用户:",-1)),l(c,{value:a.filterUser,onChange:e[1]||(e[1]=t=>a.$emit("update:filterUser",t)),style:{width:"120px"}},{default:r(()=>[l(u,{value:"all"},{default:r(()=>e[9]||(e[9]=[T("全部")])),_:1,__:[9]}),(m(!0),b(q,null,S(a.uniqueUsers,t=>(m(),$(u,{key:t,value:t},{default:r(()=>[T(I(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),p("div",oe,[e[11]||(e[11]=p("span",{class:"select-always-placeholder"},"日期范围:",-1)),l(_,{value:a.dateRange,onChange:e[2]||(e[2]=t=>a.$emit("update:dateRange",t)),style:{width:"240px"}},null,8,["value"])])]),p("div",le,[l(h,{value:a.searchText,placeholder:"请输入关键字搜索",style:{width:"200px","margin-right":"8px"},onSearch:e[3]||(e[3]=t=>a.$emit("search",t)),onInput:e[4]||(e[4]=t=>a.$emit("update:searchText",t.target.value))},null,8,["value"]),l(C,{onClick:e[5]||(e[5]=t=>a.$emit("refresh")),style:{"margin-right":"8px"}},{icon:r(()=>[l(L(P))]),_:1}),l(C,{onClick:e[6]||(e[6]=t=>a.$emit("configure-columns"))},{icon:r(()=>[l(L(j))]),_:1})])])}}}),ie=O(se,[["__scopeId","data-v-0297a1c0"]]),re=U({__name:"LogQueryTable",props:{columns:{type:Array,required:!0},data:{type:Array,required:!0},loading:{type:Boolean,default:!1},pagination:{type:Object,required:!0}},emits:["change","view-details"],setup(v,{emit:k}){const y=k,a=u=>{y("change",u)},e=u=>{y("view-details",u)};return(u,c)=>{const _=d("a-button"),h=d("a-space"),C=d("a-table");return m(),$(C,{columns:v.columns,"data-source":v.data,loading:v.loading,pagination:v.pagination,onChange:a,bordered:"",scroll:{x:1800}},{bodyCell:r(({column:t,record:o})=>[t.key==="operation"?(m(),$(h,{key:0},{default:r(()=>[l(_,{type:"link",size:"small",onClick:x=>e(o)},{default:r(()=>c[0]||(c[0]=[T("查看详情")])),_:2,__:[0]},1032,["onClick"])]),_:2},1024)):H("",!0)]),_:1},8,["columns","data-source","loading","pagination"])}}}),ue=O(re,[["__scopeId","data-v-e376420c"]]),de={class:"log-query-container"},pe=U({__name:"LogQuery",setup(v){const k=g([]),y=g(!1),a=g(""),e=g("all"),u=g("all"),c=g(["",""]),_=g(!1),h=g([]),C=g(["全部","登录","登出","创建","更新","删除"]),t=g(["全部","admin","user1","user2"]),o=E({current:1,pageSize:10,total:0,showTotal:s=>`第 ${(o.current-1)*o.pageSize+1}-${Math.min(o.current*o.pageSize,s)}条/共 ${s} 条`,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}),x=[{title:"序号",dataIndex:"serialNumber",key:"serialNumber",fixed:"left",width:70},{title:"操作类型",dataIndex:"operationType",key:"operationType",width:120},{title:"操作内容",dataIndex:"operationContent",key:"operationContent",width:300},{title:"操作人",dataIndex:"operator",key:"operator",width:100},{title:"操作时间",dataIndex:"operationTime",key:"operationTime",width:180,sorter:!0},{title:"IP地址",dataIndex:"ipAddress",key:"ipAddress",width:150},{title:"操作",key:"operation",fixed:"right",width:100}],V=K(()=>x.filter(s=>h.value.includes(s.key))),w=async()=>{y.value=!0,console.log("Fetching log query data with filters:",e.value,u.value,c.value,a.value),console.log("Pagination:",o.current,o.pageSize),await new Promise(n=>setTimeout(n,1e3));const s=Array.from({length:50}).map((n,f)=>({key:`log-item-${f}`,serialNumber:f+1,operationType:f%3===0?"登录":f%3===1?"创建":"删除",operationContent:`用户 ${f+1} 执行了操作`,operator:`user${f%2===0?1:2}`,operationTime:"2025-07-22 10:00:00",ipAddress:`192.168.1.${f}`}));k.value=s.slice((o.current-1)*o.pageSize,o.current*o.pageSize),o.total=s.length,y.value=!1},A=s=>{a.value=s,o.current=1,w()},Q=s=>{o.current=s.current||1,o.pageSize=s.pageSize||10,w()},N=()=>{_.value=!0},z=()=>{_.value=!1},R=()=>{h.value=x.map(s=>s.key)},D=s=>{console.log("Viewing details for record:",s),W.info("查看详情 functionality to be implemented")};return G(()=>{w(),R()}),J([e,u,c,a],()=>{o.current=1,w()}),(s,n)=>{const f=d("a-button"),B=d("a-checkbox"),M=d("a-checkbox-group"),F=d("a-modal");return m(),b("div",de,[l(Z),l(ie,{searchText:a.value,"onUpdate:searchText":n[0]||(n[0]=i=>a.value=i),filterOperationType:e.value,"onUpdate:filterOperationType":n[1]||(n[1]=i=>e.value=i),filterUser:u.value,"onUpdate:filterUser":n[2]||(n[2]=i=>u.value=i),dateRange:c.value,"onUpdate:dateRange":n[3]||(n[3]=i=>c.value=i),uniqueOperationTypes:C.value,uniqueUsers:t.value,onSearch:A,onRefresh:w,onConfigureColumns:N},null,8,["searchText","filterOperationType","filterUser","dateRange","uniqueOperationTypes","uniqueUsers"]),l(ue,{columns:V.value,data:k.value,loading:y.value,pagination:o,onChange:Q,onViewDetails:D},null,8,["columns","data","loading","pagination"]),l(F,{title:"Configure Table Columns",visible:_.value,"onUpdate:visible":n[5]||(n[5]=i=>_.value=i),onCancel:z,onOk:z},{default:r(()=>[p("div",null,[p("h3",null,[n[7]||(n[7]=T(" Visible Columns ")),l(f,{type:"link",onClick:R,style:{float:"right"}},{default:r(()=>n[6]||(n[6]=[T("Select All")])),_:1,__:[6]})]),l(M,{value:h.value,"onUpdate:value":n[4]||(n[4]=i=>h.value=i)},{default:r(()=>[(m(),b(q,null,S(x,i=>p("div",{key:i.key},[l(B,{value:i.key},{default:r(()=>[T(I(i.title),1)]),_:2},1032,["value"])])),64))]),_:1},8,["value"])])]),_:1},8,["visible"])])}}}),ge=O(pe,[["__scopeId","data-v-d20e1d11"]]);export{ge as default};
