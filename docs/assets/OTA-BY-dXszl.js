import{d as I,c as w,o as _,_ as x,b as f,e as n,f as u,w as l,g as m,l as $,R as G,S as P,i as M,q as H,r as g,a as J,m as R,n as X,j,F as K,k as L,t as W,h as b}from"./index-BwXPi_UQ.js";const Q={class:"page-title"},Y=I({__name:"OtaTitle",setup(c){return(h,i)=>(_(),w("h2",Q,"设备OTA"))}}),ee=x(Y,[["__scopeId","data-v-d240d7c1"]]),te={class:"ota-header-container"},ae={class:"filter-section"},ne={class:"select-container"},ie={class:"select-container"},oe={class:"action-section"},le=I({__name:"OtaHeader",props:{searchText:String,filterDeviceModel:String,filterManufacturer:String},emits:["update:searchText","update:filterDeviceModel","update:filterManufacturer","search","refresh","device-import","ota-config","configure-columns"],setup(c,{emit:h}){return(i,e)=>{const s=u("a-select-option"),p=u("a-select"),v=u("a-input-search"),r=u("a-button");return _(),w("div",te,[f("div",ae,[f("div",ne,[e[9]||(e[9]=f("span",{class:"select-always-placeholder"},"设备型号:",-1)),n(p,{value:c.filterDeviceModel,onChange:e[0]||(e[0]=t=>i.$emit("update:filterDeviceModel",t)),style:{width:"120px"}},{default:l(()=>[n(s,{value:"all"},{default:l(()=>e[8]||(e[8]=[m("全部")])),_:1,__:[8]})]),_:1},8,["value"])]),f("div",ie,[e[11]||(e[11]=f("span",{class:"select-always-placeholder"},"生产厂家:",-1)),n(p,{value:c.filterManufacturer,onChange:e[1]||(e[1]=t=>i.$emit("update:filterManufacturer",t)),style:{width:"120px"}},{default:l(()=>[n(s,{value:"all"},{default:l(()=>e[10]||(e[10]=[m("全部")])),_:1,__:[10]})]),_:1},8,["value"])])]),f("div",oe,[n(v,{value:c.searchText,placeholder:"请输入关键字搜索",style:{width:"200px","margin-right":"8px"},onSearch:e[2]||(e[2]=t=>i.$emit("search",t)),onInput:e[3]||(e[3]=t=>i.$emit("update:searchText",t.target.value))},null,8,["value"]),n(r,{type:"primary",onClick:e[4]||(e[4]=t=>i.$emit("device-import")),style:{"margin-right":"8px"}},{default:l(()=>e[12]||(e[12]=[m("设备导入")])),_:1,__:[12]}),n(r,{type:"primary",onClick:e[5]||(e[5]=t=>i.$emit("ota-config")),style:{"margin-right":"8px"}},{default:l(()=>e[13]||(e[13]=[m("OTA配置")])),_:1,__:[13]}),n(r,{onClick:e[6]||(e[6]=t=>i.$emit("refresh")),style:{"margin-right":"8px"}},{icon:l(()=>[n($(G))]),_:1}),n(r,{onClick:e[7]||(e[7]=t=>i.$emit("configure-columns"))},{icon:l(()=>[n($(P))]),_:1})])])}}}),re=x(le,[["__scopeId","data-v-eebd052a"]]),de=I({__name:"OtaTable",props:{columns:{type:Array,required:!0},data:{type:Array,required:!0},loading:{type:Boolean,default:!1},pagination:{type:Object,required:!0}},emits:["change","upgrade","details","delete"],setup(c,{emit:h}){return(i,e)=>{const s=u("a-button"),p=u("a-space"),v=u("a-table");return _(),M(v,{columns:c.columns,"data-source":c.data,loading:c.loading,pagination:c.pagination,onChange:e[0]||(e[0]=r=>i.$emit("change",r)),scroll:{x:1800}},{bodyCell:l(({column:r,record:t})=>[r.key==="operations"?(_(),M(p,{key:0},{default:l(()=>[n(s,{type:"link",onClick:y=>i.$emit("upgrade",t)},{default:l(()=>e[1]||(e[1]=[m("升级")])),_:2,__:[1]},1032,["onClick"]),n(s,{type:"link",onClick:y=>i.$emit("details",t)},{default:l(()=>e[2]||(e[2]=[m("详情")])),_:2,__:[2]},1032,["onClick"]),n(s,{type:"link",danger:"",onClick:y=>i.$emit("delete",t)},{default:l(()=>e[3]||(e[3]=[m("删除")])),_:2,__:[3]},1032,["onClick"])]),_:2},1024)):H("",!0)]),_:1},8,["columns","data-source","loading","pagination"])}}}),se=x(de,[["__scopeId","data-v-725ecf6c"]]),ue={class:"ota-container"},ce=I({__name:"OTA",setup(c){const h=g([]),i=g(!1),e=g(""),s=g("all"),p=g("all"),v=g(!1),r=g([]),t=J({current:1,pageSize:10,total:0,showTotal:a=>`第 ${(t.current-1)*t.pageSize+1}-${Math.min(t.current*t.pageSize,a)}条/共 ${a} 条`,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}),y=[{title:"序号",dataIndex:"serialNumber",key:"serialNumber",fixed:"left",width:70},{title:"设备ID",dataIndex:"deviceId",key:"deviceId",width:150},{title:"绑定子账户",dataIndex:"boundSubAccount",key:"boundSubAccount",width:120},{title:"设备型号",dataIndex:"deviceModel",key:"deviceModel",width:100},{title:"生产批次",dataIndex:"productionBatch",key:"productionBatch",width:120},{title:"生产厂家",dataIndex:"manufacturer",key:"manufacturer",width:150},{title:"初始固件",dataIndex:"initialFirmware",key:"initialFirmware",width:120},{title:"最新固件",dataIndex:"latestFirmware",key:"latestFirmware",width:120},{title:"当前固件版本",dataIndex:"currentFirmwareVersion",key:"currentFirmwareVersion",width:150},{title:"SN码",dataIndex:"snCode",key:"snCode",width:180},{title:"eFuse ID",dataIndex:"eFuseId",key:"eFuseId",width:150},{title:"MAC地址",dataIndex:"macAddress",key:"macAddress",width:150},{title:"蓝牙名称",dataIndex:"bluetoothName",key:"bluetoothName",width:150},{title:"IMEI",dataIndex:"imei",key:"imei",width:150},{title:"4G卡号",dataIndex:"fourGCardNumber",key:"fourGCardNumber",width:150},{title:"CPU序列",dataIndex:"cpuSerial",key:"cpuSerial",width:150},{title:"创建人",dataIndex:"creator",key:"creator",width:100},{title:"创建时间",dataIndex:"creationTime",key:"creationTime",width:150,sorter:!0},{title:"更新时间",dataIndex:"updateTime",key:"updateTime",width:150,sorter:!0},{title:"操作",key:"operations",fixed:"right",width:200}],D=R(()=>y.filter(a=>r.value.includes(a.key))),k=async()=>{i.value=!0,console.log("Fetching OTA data with filters:",s.value,p.value,e.value),console.log("Pagination:",t.current,t.pageSize),await new Promise(o=>setTimeout(o,1e3));const a=Array.from({length:50}).map((o,C)=>({key:`ota-item-${C}`,serialNumber:C+1,deviceId:"0075A1B2SZTDS250619B2X9J8",boundSubAccount:C%2===0?"183****7953":"-",deviceModel:"HWSZ001",productionBatch:"2025-06-30",manufacturer:"深圳天德胜科技有限公司",initialFirmware:"Z001 V 1.0.1",latestFirmware:"Z001 V 2.0.1",currentFirmwareVersion:"Z001 V 1.3.0",snCode:"SZTDS250619B2X9J8",eFuseId:"ESP32-0075A1B2",macAddress:"DC:54:75:62:66:70",bluetoothName:"Zibbi 001 250619X9J8",imei:"35380100360174",fourGCardNumber:"1477629430136",cpuSerial:"0x1FFFF7E8",creator:"33",creationTime:"2025-7-13 19:25:11",updateTime:"2025-7-13 19:25:11"}));h.value=a.slice((t.current-1)*t.pageSize,t.current*t.pageSize),t.total=a.length,i.value=!1},A=a=>{e.value=a,console.log("Search OTA:",e.value),k()},F=a=>{t.current=a.current||1,t.pageSize=a.pageSize||10,k()},O=()=>{v.value=!0},S=()=>{v.value=!1},T=()=>{r.value=y.map(a=>a.key)},N=a=>{b.info(`Upgrade ${a.deviceId}`)},B=a=>{b.info(`Details for ${a.deviceId}`)},V=a=>{b.info(`Delete ${a.deviceId}`)},z=()=>{b.info("设备导入 functionality to be implemented")},U=()=>{b.info("OTA配置 functionality to be implemented")};return X(()=>{k(),T()}),j([s,p],()=>{t.current=1,k()}),(a,o)=>{const C=u("a-button"),Z=u("a-checkbox"),q=u("a-checkbox-group"),E=u("a-modal");return _(),w("div",ue,[n(ee),n(re,{filterDeviceModel:s.value,"onUpdate:filterDeviceModel":o[0]||(o[0]=d=>s.value=d),filterManufacturer:p.value,"onUpdate:filterManufacturer":o[1]||(o[1]=d=>p.value=d),searchText:e.value,"onUpdate:searchText":o[2]||(o[2]=d=>e.value=d),onSearch:A,onRefresh:k,onDeviceImport:z,onOtaConfig:U,onConfigureColumns:O},null,8,["filterDeviceModel","filterManufacturer","searchText"]),n(se,{columns:D.value,data:h.value,loading:i.value,pagination:t,onChange:F,onUpgrade:N,onDetails:B,onDelete:V},null,8,["columns","data","loading","pagination"]),n(E,{title:"Configure Table Columns",visible:v.value,"onUpdate:visible":o[4]||(o[4]=d=>v.value=d),onCancel:S,onOk:S},{default:l(()=>[f("div",null,[f("h3",null,[o[6]||(o[6]=m(" Visible Columns ")),n(C,{type:"link",onClick:T,style:{float:"right"}},{default:l(()=>o[5]||(o[5]=[m("Select All")])),_:1,__:[5]})]),n(q,{value:r.value,"onUpdate:value":o[3]||(o[3]=d=>r.value=d)},{default:l(()=>[(_(),w(K,null,L(y,d=>f("div",{key:d.key},[n(Z,{value:d.key},{default:l(()=>[m(W(d.title),1)]),_:2},1032,["value"])])),64))]),_:1},8,["value"])])]),_:1},8,["visible"])])}}}),pe=x(ce,[["__scopeId","data-v-8032187c"]]);export{pe as default};
