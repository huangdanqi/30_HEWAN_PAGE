import{d as F,c as w,b as c,o as f,_ as R,r as v,j as O,e as u,f as x,w as r,g,F as I,k as C,l as ue,S as ie,i as $,t as q,a as se,m as M,n as de,p as L}from"./index-BDothbox.js";const ce={class:"account-title-container"},me=F({__name:"AccountTitle",setup(s){return(G,b)=>(f(),w("div",ce,b[0]||(b[0]=[c("h2",null,"账户信息",-1)])))}}),j=R(me,[["__scopeId","data-v-cb8df63c"]]),pe={class:"table-header"},ve={class:"filter-group-left"},fe={class:"select-container"},ye={class:"select-container"},ge={class:"select-container"},he={class:"filter-group-right"},be={class:"select-container"},Se={class:"select-container"},Pe={class:"select-container"},xe=F({__name:"AccountHeader",props:{filterRole:String,filterMembershipType:String,filterMembershipPayment:String,filter4GPlan:String,filter4GPayment:String,filterDeviceStatus:String,searchText:String,uniqueRoles:{type:Array,default:()=>[]},uniqueMembershipTypes:{type:Array,default:()=>[]},uniqueMembershipPayments:{type:Array,default:()=>[]},uniqueFourGPlans:{type:Array,default:()=>[]},uniqueFourGPayments:{type:Array,default:()=>[]},uniqueDeviceStatuses:{type:Array,default:()=>[]}},emits:["update:filterRole","update:filterMembershipType","update:filterMembershipPayment","update:filter4GPlan","update:filter4GPayment","update:filterDeviceStatus","update:searchText","search","refresh","configure-columns","show-info","apply-filters"],setup(s,{emit:G}){const b=s;console.log("AccountHeader Props:",b.filter4GPlan,b.filter4GPayment);const i=G,y=v(b.searchText);O(()=>b.searchText,m=>{y.value=m});const k=m=>{i("update:searchText",m)};return(m,e)=>{const d=x("a-select-option"),h=x("a-select"),P=x("a-space"),S=x("a-input-search"),A=x("a-button"),T=x("a-tooltip");return f(),w("div",pe,[u(j),c("div",ve,[u(P,{size:12},{default:r(()=>[c("div",fe,[e[9]||(e[9]=c("span",{class:"select-always-placeholder"},"IP角色",-1)),u(h,{value:s.filterRole,onChange:e[0]||(e[0]=t=>{console.log("AccountHeader: IP角色 dropdown changed to:",t),m.$emit("update:filterRole",t)}),style:{width:"108px"}},{default:r(()=>[u(d,{value:"all"},{default:r(()=>e[8]||(e[8]=[g("全部")])),_:1,__:[8]}),(f(!0),w(I,null,C(s.uniqueRoles,t=>(f(),$(d,{key:t,value:t},{default:r(()=>[g(q(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),c("div",ye,[e[11]||(e[11]=c("span",{class:"select-always-placeholder"},"会员类型",-1)),u(h,{value:s.filterMembershipType,onChange:e[1]||(e[1]=t=>{console.log("AccountHeader: 会员类型 dropdown changed to:",t),m.$emit("update:filterMembershipType",t)}),style:{width:"108px"}},{default:r(()=>[u(d,{value:"all"},{default:r(()=>e[10]||(e[10]=[g("全部")])),_:1,__:[10]}),(f(!0),w(I,null,C(s.uniqueMembershipTypes,t=>(f(),$(d,{key:t,value:t},{default:r(()=>[g(q(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),c("div",ge,[e[13]||(e[13]=c("span",{class:"select-always-placeholder"},"会员付费",-1)),u(h,{value:s.filterMembershipPayment,onChange:e[2]||(e[2]=t=>{console.log("AccountHeader: 会员付费 dropdown changed to:",t),m.$emit("update:filterMembershipPayment",t)}),style:{width:"180px"}},{default:r(()=>[u(d,{value:"all"},{default:r(()=>e[12]||(e[12]=[g("全部")])),_:1,__:[12]}),(f(!0),w(I,null,C(s.uniqueMembershipPayments,t=>(f(),$(d,{key:t,value:t},{default:r(()=>[g(q(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),_:1})]),c("div",he,[u(P,{size:12},{default:r(()=>[c("div",be,[e[15]||(e[15]=c("span",{class:"select-always-placeholder"},"4G套餐",-1)),u(h,{value:s.filter4GPlan,onChange:e[3]||(e[3]=t=>{console.log("AccountHeader: 4G套餐 dropdown changed to:",t),m.$emit("update:filter4GPlan",t)}),style:{width:"108px"}},{default:r(()=>[u(d,{value:"all"},{default:r(()=>e[14]||(e[14]=[g("全部")])),_:1,__:[14]}),(f(!0),w(I,null,C(s.uniqueFourGPlans,t=>(f(),$(d,{key:t,value:t},{default:r(()=>[g(q(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),c("div",Se,[e[17]||(e[17]=c("span",{class:"select-always-placeholder"},"4G付费",-1)),u(h,{value:s.filter4GPayment,onChange:e[4]||(e[4]=t=>{console.log("AccountHeader: 4G付费 dropdown changed to:",t),m.$emit("update:filter4GPayment",t)}),style:{width:"108px"}},{default:r(()=>[u(d,{value:"all"},{default:r(()=>e[16]||(e[16]=[g("全部")])),_:1,__:[16]}),(f(!0),w(I,null,C(s.uniqueFourGPayments,t=>(f(),$(d,{key:t,value:t},{default:r(()=>[g(q(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),c("div",Pe,[e[19]||(e[19]=c("span",{class:"select-always-placeholder"},"设备状态",-1)),u(h,{value:s.filterDeviceStatus,onChange:e[5]||(e[5]=t=>{console.log("AccountHeader: 设备状态 dropdown changed to:",t),m.$emit("update:filterDeviceStatus",t)}),style:{width:"108px"}},{default:r(()=>[u(d,{value:"all"},{default:r(()=>e[18]||(e[18]=[g("全部")])),_:1,__:[18]}),(f(!0),w(I,null,C(s.uniqueDeviceStatuses,t=>(f(),$(d,{key:t,value:t},{default:r(()=>[g(q(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),u(S,{value:y.value,"onUpdate:value":e[6]||(e[6]=t=>y.value=t),placeholder:"请输入关键字搜索",style:{width:"120px"},onSearch:k},null,8,["value"]),u(T,{title:"Configure Columns"},{default:r(()=>[u(A,{onClick:e[7]||(e[7]=t=>m.$emit("configure-columns"))},{icon:r(()=>[u(ue(ie))]),_:1})]),_:1})]),_:1})])])}}}),we=R(xe,[["__scopeId","data-v-75114ed3"]]),Ae=F({__name:"AccountTable",props:{columns:{type:Array,required:!0},data:{type:Array,required:!0},loading:Boolean,pagination:{type:Object,required:!0}},emits:["change","update:data"],setup(s,{emit:G}){const b=s,i=v([]);return O(()=>b.data,y=>{i.value=[...y]},{immediate:!0}),(y,k)=>{const m=x("a-table");return f(),$(m,{columns:s.columns,"data-source":s.data,loading:s.loading,pagination:s.pagination,onChange:k[0]||(k[0]=e=>y.$emit("change",e)),scroll:{x:2660},"row-key":"key"},null,8,["columns","data-source","loading","pagination"])}}}),Te=R(Ae,[["__scopeId","data-v-cf390741"]]),ke={class:"account-container"},Ge=F({__name:"Account",setup(s){const G=v([]),b=v(!1),i=se({current:1,pageSize:5,total:0,showTotal:l=>`第 ${(i.current-1)*i.pageSize+1}-${Math.min(i.current*i.pageSize,l)}条/共 ${l} 条`,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}),y=v([]),k=v(""),m=v(""),e=v("all"),d=v("all"),h=v("all"),P=v("all"),S=v("all"),A=v("all"),T=v("");console.log("Account.vue initial filter4GPlan:",P.value),console.log("Account.vue initial filter4GPayment:",S.value),O([e,d,h,P,S,A,T,()=>i.current,()=>i.pageSize],()=>{console.log("Account.vue: Watcher triggered."),console.log("  filter4GPayment (in watcher):",S.value),i.current=1,L(()=>U())});const t=M(()=>[...new Set(y.value.map(l=>l.ipRole))]),K=M(()=>[...new Set(y.value.map(l=>l.membershipType))]),W=M(()=>[...new Set(y.value.map(l=>l.membershipPaymentStatus))]),J=M(()=>{const l=new Set;return l.add("all"),y.value.forEach(a=>l.add(a.fourGPlan)),[...l]}),Q=M(()=>{const l=new Set;return l.add("all"),y.value.forEach(a=>l.add(a.fourGPaymentStatus)),[...l]}),X=M(()=>[...new Set(y.value.map(l=>l.deviceStatus))]),_=[{title:"序号",dataIndex:"serialNumber",key:"serialNumber",sorter:!0,width:80},{title:"账户ID",dataIndex:"accountId",key:"accountId",sorter:!0,width:120},{title:"手机号",dataIndex:"phoneNumber",key:"phoneNumber",sorter:!0,width:120},{title:"设备型号",dataIndex:"deviceModel",key:"deviceModel",sorter:!0,width:120},{title:"设备ID",dataIndex:"deviceId",key:"deviceId",sorter:!0,width:120},{title:"IP角色",dataIndex:"ipRole",key:"ipRole",sorter:!0,width:120},{title:"产品型号",dataIndex:"productModel",key:"productModel",sorter:!0,width:120},{title:"会员类型",dataIndex:"membershipType",key:"membershipType",sorter:!0,width:120},{title:"会员付费",dataIndex:"membershipPaymentStatus",key:"membershipPaymentStatus",sorter:!0,width:120},{title:"会员激活时间",dataIndex:"membershipActivationTime",key:"membershipActivationTime",sorter:!0,width:140},{title:"会员到期时间",dataIndex:"membershipExpirationTime",key:"membershipExpirationTime",sorter:!0,width:140},{title:"4G套餐",dataIndex:"fourGPlan",key:"fourGPlan",sorter:!0,width:100},{title:"当月剩余流量",dataIndex:"remainingData",key:"remainingData",sorter:!0,width:160},{title:"4G付费",dataIndex:"fourGPaymentStatus",key:"4GPaymentStatus",sorter:!0,width:100},{title:"服务年费用 (元)",dataIndex:"annualServiceFee",key:"annualServiceFee",sorter:!0,width:160},{title:"ASR年用量",dataIndex:"asrAnnualUsage",key:"asrAnnualUsage",sorter:!0,width:120},{title:"LLM年用量",dataIndex:"llmAnnualUsage",key:"llmAnnualUsage",sorter:!0,width:120},{title:"TTS年用量",dataIndex:"ttsAnnualUsage",key:"ttsAnnualUsage",sorter:!0,width:120},{title:"音色克隆年用量",dataIndex:"voiceCloningAnnualUsage",key:"voiceCloningAnnualUsage",sorter:!0,width:160},{title:"创建时间",dataIndex:"creationTime",key:"creationTime",sorter:!0,width:120},{title:"设备状态",dataIndex:"deviceStatus",key:"deviceStatus",sorter:!0,width:120,fixed:"right"}],D=v(_.map(l=>l.key)),Y=v(_.map(l=>l.key)),z=v(!1),Z=M(()=>Y.value.map(a=>_.find(p=>p.key===a)).filter(a=>a!==void 0).filter(a=>D.value.includes(a.key))),V=()=>{z.value=!0},B=()=>{z.value=!1},ee=()=>{alert("Account Information Page - Info")},te=()=>{console.log("Applying filters...",{filterRole:e.value,filterMembershipType:d.value,filterMembershipPayment:h.value,filter4GPlan:P.value,filter4GPayment:S.value,filterDeviceStatus:A.value,searchText:T.value}),i.current=1,L(()=>U())},ae=()=>{D.value=_.map(l=>l.key)},U=async()=>{b.value=!0,console.log("Account.vue: fetchData called."),console.log("  filterRole:",e.value),console.log("  filterMembershipType:",d.value),console.log("  filterMembershipPayment:",h.value),console.log("  filter4GPlan (inside fetchData):",P.value),console.log("  filter4GPayment:",S.value),console.log("  filterDeviceStatus:",A.value),console.log("  searchText:",T.value),console.log("  Pagination:",i.current,i.pageSize),console.log("Fetching data with filters:",k.value,m.value),await new Promise(p=>setTimeout(p,1e3));const l=Array.from({length:50}).map((p,o)=>({key:`item-${o}`,serialNumber:o+1,accountId:`acc-${o+1}`,phoneNumber:`1380000${String(o).padStart(4,"0")}`,deviceModel:`Model ${o%5}`,deviceId:`dev-${o+1e3}`,ipRole:o%2===0?"Admin":"User",productModel:`Prod ${o%3}`,membershipType:o%2===0?"Premium":"Standard",membershipPaymentStatus:o%2===0?"Paid":"Unpaid",membershipActivationTime:`2023-01-${String(o%30+1).padStart(2,"0")}`,membershipExpirationTime:`2024-01-${String(o%30+1).padStart(2,"0")}`,fourGPlan:o%3===0?"unlimited":"limited",remainingData:`${(100-o).toFixed(2)} GB`,fourGPaymentStatus:o%3===0?"Active":"Inactive",annualServiceFee:(o+1)*100,asrAnnualUsage:`${(o*10).toFixed(2)} hrs`,llmAnnualUsage:`${(o*50).toFixed(2)} tokens`,ttsAnnualUsage:`${(o*20).toFixed(2)} hrs`,voiceCloningAnnualUsage:`${(o*5).toFixed(2)} clones`,creationTime:`2022-12-${String(o%31+1).padStart(2,"0")}`,deviceStatus:o%2===0?"Online":"Offline"}));y.value=l;const a=y.value.filter(p=>{const o=e.value==="all"||p.ipRole===e.value,H=d.value==="all"||p.membershipType===d.value,N=h.value==="all"||p.membershipPaymentStatus===h.value,n=P.value==="all"||p.fourGPlan===P.value,E=S.value==="all"||p.fourGPaymentStatus===S.value;console.log(`Filtering: item.fourGPaymentStatus=${p.fourGPaymentStatus}, filter4GPayment.value=${S.value}, fourGPaymentMatch=${E}`);const ne=A.value==="all"||p.deviceStatus===A.value,oe=!T.value||Object.values(p).some(re=>String(re).toLowerCase().includes(T.value.toLowerCase()));return o&&H&&N&&n&&E&&ne&&oe});console.log("Filtered data length:",a.length),console.log("Sample filtered data (first 5 items):",a.slice(0,5)),G.value=a.slice((i.current-1)*i.pageSize,i.current*i.pageSize),i.total=a.length,b.value=!1},le=(l,a,p)=>{i.current=l.current,i.pageSize=l.pageSize,console.log("Table change - Pagination:",l),console.log("Table change - Filters:",a),console.log("Table change - Sorter:",p)};return de(()=>{U()}),(l,a)=>{const p=x("a-button"),o=x("a-checkbox"),H=x("a-checkbox-group"),N=x("a-modal");return f(),w("div",ke,[u(j),u(we,{"filter-device-model":k.value,"onUpdate:filterDeviceModel":a[0]||(a[0]=n=>{k.value=n}),"filter-manufacturer":m.value,"onUpdate:filterManufacturer":a[1]||(a[1]=n=>{m.value=n}),"filter-device-status":A.value,"onUpdate:filterDeviceStatus":a[2]||(a[2]=n=>{A.value=n}),"unique-roles":t.value,"unique-membership-types":K.value,"filter-membership-type":d.value,"onUpdate:filterMembershipType":a[3]||(a[3]=n=>{d.value=n}),"unique-membership-payments":W.value,"filter-membership-payment":h.value,"onUpdate:filterMembershipPayment":a[4]||(a[4]=n=>{h.value=n}),"unique-four-g-plans":J.value,"filter-four-g-plan":P.value,"onUpdate:filter4GPlan":a[5]||(a[5]=n=>{P.value=n,console.log("Account.vue: @update:filter4GPlan received",n)}),"unique-four-g-payments":Q.value,"filter-four-g-payment":S.value,"onUpdate:filter4GPayment":a[6]||(a[6]=n=>{S.value=n,console.log("Account.vue: @update:filter4GPayment received",n)}),"unique-device-statuses":X.value,searchText:T.value,"onUpdate:searchText":a[7]||(a[7]=n=>{T.value=n}),onRefresh:U,onConfigureColumns:V,onShowInfo:ee,onApplyFilters:te,"filter-role":e.value,"onUpdate:filterRole":a[8]||(a[8]=n=>e.value=n)},null,8,["filter-device-model","filter-manufacturer","filter-device-status","unique-roles","unique-membership-types","filter-membership-type","unique-membership-payments","filter-membership-payment","unique-four-g-plans","filter-four-g-plan","unique-four-g-payments","filter-four-g-payment","unique-device-statuses","searchText","filter-role"]),u(Te,{columns:Z.value,data:G.value,loading:b.value,pagination:i,onChange:le,"onUpdate:data":a[9]||(a[9]=n=>{G.value=n})},null,8,["columns","data","loading","pagination"]),u(N,{title:"Configure Table Columns",visible:z.value,onCancel:B,onOk:B},{default:r(()=>[c("div",null,[c("h3",null,[a[12]||(a[12]=g(" Visible Columns ")),u(p,{type:"link",onClick:ae,style:{float:"right"}},{default:r(()=>a[11]||(a[11]=[g("Select All")])),_:1,__:[11]})]),u(H,{value:D.value,"onUpdate:value":a[10]||(a[10]=n=>D.value=n)},{default:r(()=>[(f(),w(I,null,C(_,n=>c("div",{key:n.key},[u(o,{value:n.key},{default:r(()=>[g(q(n.title),1)]),_:2},1032,["value"])])),64))]),_:1},8,["value"])])]),_:1},8,["visible"])])}}}),Ie=R(Ge,[["__scopeId","data-v-3cd75c09"]]);export{Ie as default};
