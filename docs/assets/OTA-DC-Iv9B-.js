import{d as k,r as f,c as O,b as $,e as n,f as v,w as l,o as S,g as r,k as I,S as b,_ as T,i as C,n as x,a as w,m as A}from"./index-BwVehyap.js";const M={class:"ota-header"},z={class:"ota-operations"},N=k({__name:"OtaHeader",emits:["filter-change","search","refresh","export","settings"],setup(g,{emit:y}){const d=f("all"),a=f("all"),p=f("");return(o,e)=>{const i=v("a-select-option"),u=v("a-select"),c=v("a-input-search"),_=v("a-button"),s=v("a-tooltip"),m=v("a-space");return S(),O("div",M,[e[17]||(e[17]=$("h2",null,"OTA Listing Information",-1)),$("div",z,[n(m,null,{default:l(()=>[n(u,{value:d.value,"onUpdate:value":e[0]||(e[0]=t=>d.value=t),placeholder:"在线状态: 全部",style:{width:"120px"},onChange:e[1]||(e[1]=t=>o.$emit("filter-change",{type:"onlineStatus",value:t}))},{default:l(()=>[n(i,{value:"all"},{default:l(()=>e[9]||(e[9]=[r("全部")])),_:1,__:[9]}),n(i,{value:"online"},{default:l(()=>e[10]||(e[10]=[r("在线")])),_:1,__:[10]}),n(i,{value:"offline"},{default:l(()=>e[11]||(e[11]=[r("离线")])),_:1,__:[11]})]),_:1},8,["value"]),n(u,{value:a.value,"onUpdate:value":e[2]||(e[2]=t=>a.value=t),placeholder:"设备状态: 全部",style:{width:"120px"},onChange:e[3]||(e[3]=t=>o.$emit("filter-change",{type:"deviceStatus",value:t}))},{default:l(()=>[n(i,{value:"all"},{default:l(()=>e[12]||(e[12]=[r("全部")])),_:1,__:[12]}),n(i,{value:"active"},{default:l(()=>e[13]||(e[13]=[r("活跃")])),_:1,__:[13]}),n(i,{value:"inactive"},{default:l(()=>e[14]||(e[14]=[r("不活跃")])),_:1,__:[14]})]),_:1},8,["value"]),n(c,{value:p.value,"onUpdate:value":e[4]||(e[4]=t=>p.value=t),placeholder:"请输入关键字搜索",style:{width:"200px"},onSearch:e[5]||(e[5]=t=>o.$emit("search",t))},null,8,["value"]),n(_,{type:"primary",onClick:e[6]||(e[6]=t=>o.$emit("refresh"))},{default:l(()=>e[15]||(e[15]=[r("刷新")])),_:1,__:[15]}),n(_,{onClick:e[7]||(e[7]=t=>o.$emit("export"))},{default:l(()=>e[16]||(e[16]=[r("导出")])),_:1,__:[16]}),n(s,{title:"Settings"},{default:l(()=>[n(_,{type:"default",shape:"circle",onClick:e[8]||(e[8]=t=>o.$emit("settings"))},{icon:l(()=>[n(I(b))]),_:1})]),_:1})]),_:1})])])}}}),V=T(N,[["__scopeId","data-v-c240565d"]]),D=k({__name:"OtaTable",props:{columns:{type:Array,required:!0},data:{type:Array,required:!0},loading:Boolean,pagination:{type:Object,required:!0}},emits:["change","upgrade","details","delete"],setup(g,{emit:y}){return(d,a)=>{const p=v("a-button"),o=v("a-space"),e=v("a-table");return S(),C(e,{columns:g.columns,"data-source":g.data,loading:g.loading,pagination:g.pagination,onChange:a[0]||(a[0]=i=>d.$emit("change",i)),"<!--":"",Add:"",horizontal:"",scroll:"",if:"",needed:"","--":""},{bodyCell:l(({column:i,record:u})=>[i.key==="operations"?(S(),C(o,{key:0},{default:l(()=>[n(p,{type:"link",onClick:c=>d.$emit("upgrade",u)},{default:l(()=>a[1]||(a[1]=[r("升级")])),_:2,__:[1]},1032,["onClick"]),n(p,{type:"link",onClick:c=>d.$emit("details",u)},{default:l(()=>a[2]||(a[2]=[r("详情")])),_:2,__:[2]},1032,["onClick"]),n(p,{type:"link",danger:"",onClick:c=>d.$emit("delete",u)},{default:l(()=>a[3]||(a[3]=[r("删除")])),_:2,__:[3]},1032,["onClick"])]),_:2},1024)):x("",!0)]),default:l(()=>[a[4]||(a[4]=r(' :scroll="{ x: 1800 }" > '))]),_:1,__:[4]},8,["columns","data-source","loading","pagination"])}}}),B=T(D,[["__scopeId","data-v-128c7b2d"]]),U={class:"ota-container"},q=k({__name:"OTA",setup(g){const y=f([]),d=f(!1),a=w({current:1,pageSize:3,total:0,showTotal:s=>`Total ${s} items`}),p=f(""),o=f(""),e=f(""),i=[{title:"序号",dataIndex:"serialNumber",key:"serialNumber"},{title:"设备ID",dataIndex:"deviceId",key:"deviceId"},{title:"设备型号",dataIndex:"deviceModel",key:"deviceModel"},{title:"在线状态",dataIndex:"onlineStatus",key:"onlineStatus"},{title:"设备状态",dataIndex:"deviceStatus",key:"deviceStatus"},{title:"软件版本",dataIndex:"softwareVersion",key:"softwareVersion"},{title:"最后一次在线时间",dataIndex:"lastOnlineTime",key:"lastOnlineTime"},{title:"最后一次离线时间",dataIndex:"lastOfflineTime",key:"lastOfflineTime"},{title:"创建时间",dataIndex:"creationTime",key:"creationTime"},{title:"OTA完成时间",dataIndex:"otaCompletionTime",key:"otaCompletionTime"},{title:"操作",key:"operations",fixed:"right",width:180}],u=async()=>{d.value=!0,console.log("Fetching OTA data with filters:",p.value,o.value,e.value),console.log("Pagination:",a.current,a.pageSize),await new Promise(m=>setTimeout(m,1e3));const s=Array.from({length:50}).map((m,t)=>({key:`ota-item-${t}`,serialNumber:t+1,deviceId:`ota-dev-${t+1e3}`,deviceModel:`OTA Model ${t%3}`,onlineStatus:t%2===0?"在线":"离线",deviceStatus:t%2===0?"正常":"异常",softwareVersion:`v1.0.${t}`,lastOnlineTime:`2023-10-${String(t%30+1).padStart(2,"0")} 10:00:00`,lastOfflineTime:t%2===0?"-":`2023-10-${String(t%30+1).padStart(2,"0")} 10:00:00`,creationTime:`2023-10-${String(t%30+1).padStart(2,"0")} 10:00:00`,otaCompletionTime:t%3===0?`2023-10-${String(t%30+1).padStart(2,"0")} 10:05:00`:"-",operations:""}));y.value=s.slice((a.current-1)*a.pageSize,a.current*a.pageSize),a.total=s.length,d.value=!1},c=s=>{e.value=s,console.log("Search OTA:",e.value),u()},_=s=>{a.current=s.current,a.pageSize=s.pageSize,u()};return A(()=>{u()}),(s,m)=>(S(),O("div",U,[n(V,{"filter-device-model":p.value,"onUpdate:filterDeviceModel":m[0]||(m[0]=t=>p.value=t),"filter-manufacturer":o.value,"onUpdate:filterManufacturer":m[1]||(m[1]=t=>o.value=t),onSearch:c,onRefresh:u},null,8,["filter-device-model","filter-manufacturer"]),n(B,{columns:i,data:y.value,loading:d.value,pagination:a,onChange:_},null,8,["data","loading","pagination"])]))}}),P=T(q,[["__scopeId","data-v-adb649a3"]]);export{P as default};
