import{d as me,j as k,r,k as ve,i as Z,w as s,l as h,f as u,o as E,b as d,x as V,e as a,S as fe,R as ye,m as _e,g as T,t as ge,n as ke,h as we,_ as he}from"./index-DxvlNLqH.js";import{l as H,t as xe,C as be,d as Ce}from"./vuedraggable.umd-Dpm0IBux.js";import{S as Te}from"./SettingOutlined-B1YVnB9v.js";const Ie={class:"top-controls-wrapper"},Se={class:"left-aligned-section"},De={class:"right-aligned-icons"},Ve={class:"column-setting-panel",style:{"max-height":"300px","overflow-y":"auto"}},Ne={class:"setting-section"},Oe={class:"section-header",style:{display:"flex","justify-content":"space-between"}},$e={class:"column-checkbox-item",style:{padding:"4px 0"}},Ae={class:"table-container"},Re=me({__name:"ProductList",setup(ze,{expose:J}){const Q=()=>{we.info("开发中")},W=k(()=>({...H,Pagination:{...H.Pagination,page:""}})),p=[{key:"rowIndex",title:"序号",dataIndex:"rowIndex",width:60,fixed:"left",customRender:({index:t})=>t+1},{key:"productId",title:"商品ID",dataIndex:"productId",width:120},{key:"productName",title:"商品名称",dataIndex:"productName",width:200},{key:"productCode",title:"产品ID",dataIndex:"productCode",width:120},{key:"productName2",title:"产品名称",dataIndex:"productName2",width:200},{key:"productType",title:"产品类型",dataIndex:"productType",width:120},{key:"color",title:"颜色",dataIndex:"color",width:100},{key:"memberType",title:"初始会员",dataIndex:"memberType",width:120},{key:"deviceId",title:"设备ID",dataIndex:"deviceId",width:220},{key:"subAccountId",title:"子账户ID",dataIndex:"subAccountId",width:120},{key:"activationTime",title:"激活时间",dataIndex:"activationTime",width:160,sorter:(t,e)=>new Date(t.activationTime).getTime()-new Date(e.activationTime).getTime(),sortDirections:["ascend","descend"]},{key:"updateTime",title:"更新时间",dataIndex:"updateTime",width:160,sorter:(t,e)=>new Date(t.updateTime).getTime()-new Date(e.updateTime).getTime(),sortDirections:["ascend","descend"]},{key:"operation",title:"操作",dataIndex:"operation",width:150,fixed:"right"}],f=r(p.map(t=>t.key)),m=r(p.map(t=>t.key)),v=r({columnKey:"updateTime",order:"descend"}),X=t=>t.map(e=>({title:e.title,dataIndex:e.dataIndex,key:e.key,width:e.width,fixed:e.fixed,sorter:e.sorter,sortDirections:e.sortDirections,sortOrder:v.value&&e.key===v.value.columnKey?v.value.order:void 0,defaultSortOrder:e.defaultSortOrder,customRender:e.customRender?e.customRender:({text:o})=>o==null||o===""?"-":o,className:e.className})),q=k(()=>{const t=f.value.filter(o=>m.value.includes(o)).map(o=>p.find(l=>l.key===o)).filter(Boolean);return X(t).sort((o,l)=>{const i={left:1,undefined:2,right:3},c=i[o.fixed]||2,C=i[l.fixed]||2;return c-C})}),x=Array.from({length:30},(t,e)=>{const o=["普通挂件","毛绒玩具","模型"],l=["粉色碳碳娃挂件富盒普通款","蓝色小熊玩偶","绿色恐龙模型"],i=["普通会员","VIP","SVIP"],c=["亮光粉","天蓝","草绿"];return{productId:`A${e%3+1}`,productName:l[e%3],productCode:`HWSZ00100${e%3+1}`,productName2:l[e%3],productType:o[e%3],color:c[e%3],memberType:i[e%3],deviceId:`0075A1B2SZTD5ZSD69I892XJU${String.fromCharCode(66+e)}`,subAccountId:`183****79${53+e%10}`,activationTime:`2025-7-${13+e%10} ${10+e%10}:25:1${e%10}`,updateTime:`2025-7-${13+e%10} ${11+e%10}:30:2${e%10}`}});console.log("Raw Data:",x);const b=r(""),N=(t,e,o)=>{console.log("Table change:",t,e,o);const l=Array.isArray(o)?o[0]:o;l&&l.order?v.value={columnKey:l.columnKey,order:l.order}:v.value={columnKey:"updateTime",order:"descend"},F.value=1},G=()=>{console.log("Setting clicked")},S=r(!1),O=r("middle"),Y=({key:t})=>{O.value=t},$=()=>{m.value=p.map(t=>t.key),f.value=p.map(t=>t.key)},ee=t=>{const{newIndex:e,oldIndex:o}=t,l=f.value[o],i=[...f.value];i.splice(o,1),i.splice(e,0,l),f.value=i},te=(t,e)=>{e?m.value.includes(t)||m.value.push(t):m.value=m.value.filter(o=>o!==t)},oe=()=>{console.log("Refresh button clicked!"),S.value=!0,b.value="",_.value="",y.value="",g.value="",$(),setTimeout(()=>{S.value=!1},500)},A=r(""),y=r(""),R=r(""),_=r(""),z=r(""),g=r(""),P=k(()=>[{value:"",label:"全部"},...Array.from(new Set(x.map(t=>t.productName))).map(t=>({value:t,label:t}))]),B=k(()=>[{value:"",label:"全部"},...Array.from(new Set(x.map(t=>t.productType))).map(t=>({value:t,label:t}))]),U=k(()=>[{value:"",label:"全部"},...Array.from(new Set(x.map(t=>t.memberType))).map(t=>({value:t,label:t}))]),D=k(()=>{var e;let t=[...x];if(A.value&&(t=t.filter(o=>o.productId===A.value)),y.value&&(t=t.filter(o=>o.productName===y.value)),R.value&&(t=t.filter(o=>o.productCode===R.value)),_.value&&(t=t.filter(o=>o.productType===_.value)),z.value&&(t=t.filter(o=>o.color===z.value)),g.value&&(t=t.filter(o=>o.memberType===g.value)),b.value){const o=b.value.toLowerCase();t=t.filter(l=>Object.values(l).some(i=>typeof i=="string"&&i.toLowerCase().includes(o)))}if(v.value&&v.value.order){const{columnKey:o,order:l}=v.value,i=(e=p.find(c=>c.key===o))==null?void 0:e.sorter;i&&t.sort((c,C)=>{const I=i(c,C);return l==="ascend"?I:-I})}return t}),F=r(1),ae=r(10),le=k(()=>({total:D.value.length,current:F.value,pageSize:ae.value,showSizeChanger:!0,pageSizeOptions:["10","20","50"],showTotal:(t,e)=>`第${e[0]}-${e[1]}条/共${t}条`,showQuickJumper:{goButton:"页"}}));return ve(()=>{m.value=p.map(t=>t.key)}),J({handleTableChange:N}),(t,e)=>{const o=u("a-select"),l=u("a-tooltip"),i=u("a-input"),c=u("a-menu-item"),C=u("a-menu"),I=u("a-dropdown"),ne=u("a-button"),se=u("a-checkbox"),de=u("a-popover"),ie=u("a-divider"),re=u("a-popconfirm"),ue=u("a-space"),ce=u("a-table"),pe=u("a-config-provider");return E(),Z(pe,{locale:W.value,theme:{algorithm:h(xe).defaultAlgorithm}},{default:s(()=>{var K,L,j;return[e[15]||(e[15]=d("div",{class:"title-container"},[d("h2",null,"商品列表")],-1)),d("div",Ie,[d("div",Se,[d("div",{class:V(["select-container product-type-select",{selected:_.value}]),style:{"margin-left":"10px"}},[e[6]||(e[6]=d("span",{class:"select-always-placeholder"},"产品类型:",-1)),a(l,{title:((K=B.value.find(n=>n.value===_.value))==null?void 0:K.label)||"全部"},{default:s(()=>[a(o,{value:_.value,"onUpdate:value":e[0]||(e[0]=n=>_.value=n),style:{width:"120px"},options:B.value,"allow-clear":""},null,8,["value","options"])]),_:1},8,["title"])],2),d("div",{class:V(["select-container product-name-select",{selected:y.value}]),style:{"margin-left":"10px"}},[e[7]||(e[7]=d("span",{class:"select-always-placeholder"},"商品名称:",-1)),a(l,{title:((L=P.value.find(n=>n.value===y.value))==null?void 0:L.label)||"全部"},{default:s(()=>[a(o,{value:y.value,"onUpdate:value":e[1]||(e[1]=n=>y.value=n),style:{width:"150px"},options:P.value,"allow-clear":""},null,8,["value","options"])]),_:1},8,["title"])],2),d("div",{class:V(["select-container member-type-select",{selected:g.value}]),style:{"margin-left":"10px"}},[e[8]||(e[8]=d("span",{class:"select-always-placeholder"},"初始会员:",-1)),a(l,{title:((j=U.value.find(n=>n.value===g.value))==null?void 0:j.label)||"全部"},{default:s(()=>[a(o,{value:g.value,"onUpdate:value":e[2]||(e[2]=n=>g.value=n),style:{width:"120px"},options:U.value,"allow-clear":""},null,8,["value","options"])]),_:1},8,["title"])],2)]),d("div",De,[a(i,{value:b.value,"onUpdate:value":e[3]||(e[3]=n=>b.value=n),placeholder:"输入关键字搜索",style:{width:"200px"}},{prefix:s(()=>[a(h(fe))]),_:1},8,["value"]),a(h(ye),{onClick:oe}),a(I,null,{overlay:s(()=>[a(C,{onClick:Y},{default:s(()=>[a(c,{key:"large"},{default:s(()=>e[9]||(e[9]=[T("宽松")])),_:1,__:[9]}),a(c,{key:"middle"},{default:s(()=>e[10]||(e[10]=[T("中等")])),_:1,__:[10]}),a(c,{key:"small"},{default:s(()=>e[11]||(e[11]=[T("紧凑")])),_:1,__:[11]})]),_:1})]),default:s(()=>[a(h(be),{onClick:e[4]||(e[4]=_e(()=>{},["prevent"]))})]),_:1}),a(de,{trigger:"click",placement:"bottomRight"},{content:s(()=>[d("div",Ve,[d("div",Ne,[d("div",Oe,[e[13]||(e[13]=d("span",null,"列展示",-1)),a(ne,{type:"link",onClick:$},{default:s(()=>e[12]||(e[12]=[T("重置")])),_:1,__:[12]})]),a(h(Ce),{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=n=>f.value=n),"item-key":"key",onEnd:ee,class:"column-checkbox-group"},{item:s(({element:n})=>[d("div",$e,[a(se,{checked:m.value.includes(n),onChange:w=>te(n,w.target.checked)},{default:s(()=>{var w;return[T(ge((w=p.find(M=>M.key===n))==null?void 0:w.title),1)]}),_:2},1032,["checked","onChange"])])]),_:1},8,["modelValue"])])])]),default:s(()=>[a(h(Te),{onClick:G})]),_:1})])]),d("div",Ae,[a(ce,{columns:q.value,"data-source":D.value,pagination:D.value.length===0?!1:le.value,loading:S.value,size:O.value,scroll:{x:1e3},onChange:N,showSorterTooltip:!1},{bodyCell:s(({column:n,record:w})=>[n.key==="operation"?(E(),Z(ue,{key:0,class:"action-cell",direction:"horizontal"},{default:s(()=>[d("a",{class:"edit-link",onClick:Q},"编辑"),a(ie,{type:"vertical"}),a(re,{title:"确定要删除该信息吗?",onConfirm:M=>t.$emit("delete-record",w)},{default:s(()=>e[14]||(e[14]=[d("a",{class:"danger-link"},"删除",-1)])),_:2,__:[14]},1032,["onConfirm"])]),_:2},1024)):ke("",!0)]),_:1},8,["columns","data-source","pagination","loading","size"])])]}),_:1,__:[15]},8,["locale","theme"])}}}),Fe=he(Re,[["__scopeId","data-v-6153b687"]]);export{Fe as default};
