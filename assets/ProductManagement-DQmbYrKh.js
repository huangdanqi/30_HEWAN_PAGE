import{d as be,j as g,r as s,k as Te,i as E,w as o,l as S,f as r,o as $,b as n,e as a,g as v,S as Ce,R as we,m as Se,n as xe,t as Me,p as Ie,h as Ne,_ as De}from"./index-DfzAVXA4.js";import{l as q,t as He,C as We,d as Ze}from"./vuedraggable.umd-10iW6iGG.js";import{F as Oe}from"./FirmwareReleaseModal-B7mBKfQr.js";import{F as Re}from"./FirmwareEditModal-BIHlcCHC.js";import{_ as Ve}from"./ProductCreateModal.vue_vue_type_script_setup_true_lang-DhrtkhR-.js";import"./InboxOutlined-C3N9vE2P.js";const Pe={class:"top-controls-wrapper"},Fe={class:"left-aligned-section"},ze={class:"select-container device-model-select",style:{"margin-left":"10px"}},Ae={class:"select-container product-type-select",style:{"margin-left":"10px"}},Ue={class:"select-container ip-name-select",style:{"margin-left":"10px"}},Ee={class:"right-aligned-icons"},$e={class:"column-setting-panel",style:{"max-height":"300px","overflow-y":"auto"}},qe={class:"setting-section"},Be={class:"section-header",style:{display:"flex","justify-content":"space-between"}},Ke={class:"column-checkbox-item",style:{padding:"4px 0"}},je={class:"table-container"},Le=["onClick"],Je=be({__name:"ProductManagement",setup(Qe,{expose:B}){const K=g(()=>({...q,Pagination:{...q.Pagination,page:""}})),y=[{key:"rowIndex",title:"序号",dataIndex:"rowIndex",width:60,fixed:"left",customRender:({index:l})=>l+1},{key:"productId",title:"产品ID",dataIndex:"productId",width:120},{key:"productName",title:"产品名称",dataIndex:"productName",width:180},{key:"productType",title:"产品类型",dataIndex:"productType",width:120},{key:"color",title:"颜色",dataIndex:"color",width:100},{key:"productDetails",title:"产品详情",dataIndex:"productDetails",width:300},{key:"deviceModel",title:"设备型号",dataIndex:"deviceModel",width:120},{key:"ipName",title:"IP名称",dataIndex:"ipName",width:100},{key:"creator",title:"创建人",dataIndex:"creator",width:80},{key:"createTime",title:"创建时间",dataIndex:"createTime",width:160,sorter:(l,e)=>l.createTime.localeCompare(e.createTime),sortDirections:["ascend","descend"]},{key:"updateTime",title:"更新时间",dataIndex:"updateTime",width:160,sorter:(l,e)=>l.updateTime.localeCompare(e.updateTime),sortDirections:["ascend","descend"]},{key:"operation",title:"操作",dataIndex:"",width:100,fixed:"right"}],h=s(y.map(l=>l.key)),f=s(y.map(l=>l.key)),j=l=>l.map(e=>({title:e.title,dataIndex:e.dataIndex,key:e.key,width:e.width,fixed:e.fixed,sorter:e.sorter,sortDirections:e.sortDirections,sortOrder:k.value&&e.key===k.value.columnKey?k.value.order:void 0,defaultSortOrder:e.defaultSortOrder,customRender:e.customRender?e.customRender:({text:t})=>t==null||t===""?"-":t})),L=g(()=>{const l=h.value.filter(t=>f.value.includes(t)).map(t=>y.find(d=>d.key===t)).filter(Boolean);return j(l).sort((t,d)=>{const u={left:1,undefined:2,right:3},b=u[t.fixed]||2,C=u[d.fixed]||2;return b-C})}),_=[{key:1,productId:"HWSZ001001",productName:"粉色碳碳富盒挂件",productType:"首盒挂件",color:"荧光粉",productDetails:"布料: 云朵塑 猫兔毛 10毛 33号; ...",deviceModel:"HWSZ001",ipName:"喵喵",creator:"33",createTime:"2025-7-13 19:25:11",updateTime:"2025-7-13 19:25:11"},{key:2,productId:"HWSZ002001",productName:"蓝色碳碳富盒挂件",productType:"次盒挂件",color:"天蓝",productDetails:"布料: 棉 猫兔毛 8毛 22号; ...",deviceModel:"HWSZ002",ipName:"汪汪",creator:"34",createTime:"2025-8-13 19:25:11",updateTime:"2025-8-13 19:25:11"},{key:3,productId:"HWSZ003001",productName:"绿色碳碳富盒挂件",productType:"首盒挂件",color:"草绿",productDetails:"布料: 亚麻 猫兔毛 12毛 44号; ...",deviceModel:"HWSZ003",ipName:"咩咩",creator:"35",createTime:"2025-9-13 19:25:11",updateTime:"2025-9-13 19:25:11"},{key:4,productId:"HWSZ004001",productName:"黄色碳碳富盒挂件",productType:"其他类型",color:"柠檬黄",productDetails:"布料: 丝 猫兔毛 15毛 55号; ...",deviceModel:"HWSZ004",ipName:"喵喵",creator:"36",createTime:"2025-10-13 19:25:11",updateTime:"2025-10-13 19:25:11"},{key:5,productId:"HWSZ005001",productName:"紫色碳碳富盒挂件",productType:"首盒挂件",color:"薰衣草紫",productDetails:"布料: 羊毛 猫兔毛 9毛 66号; ...",deviceModel:"HWSZ001",ipName:"汪汪",creator:"37",createTime:"2025-11-13 19:25:11",updateTime:"2025-11-13 19:25:11"},{key:6,productId:"HWSZ006001",productName:"橙色碳碳富盒挂件",productType:"次盒挂件",color:"橙橘",productDetails:"布料: 棉 猫兔毛 7毛 77号; ...",deviceModel:"HWSZ002",ipName:"咩咩",creator:"38",createTime:"2025-12-13 19:25:11",updateTime:"2025-12-13 19:25:11"},{key:7,productId:"HWSZ007001",productName:"红色碳碳富盒挂件",productType:"其他类型",color:"中国红",productDetails:"布料: 丝 猫兔毛 11毛 88号; ...",deviceModel:"HWSZ003",ipName:"喵喵",creator:"39",createTime:"2026-1-13 19:25:11",updateTime:"2026-1-13 19:25:11"},{key:8,productId:"HWSZ008001",productName:"青色碳碳富盒挂件",productType:"首盒挂件",color:"青蓝",productDetails:"布料: 亚麻 猫兔毛 13毛 99号; ...",deviceModel:"HWSZ004",ipName:"汪汪",creator:"40",createTime:"2026-2-13 19:25:11",updateTime:"2026-2-13 19:25:11"},{key:9,productId:"HWSZ009001",productName:"黑色碳碳富盒挂件",productType:"次盒挂件",color:"墨黑",productDetails:"布料: 棉 猫兔毛 10毛 100号; ...",deviceModel:"HWSZ001",ipName:"咩咩",creator:"41",createTime:"2026-3-13 19:25:11",updateTime:"2026-3-13 19:25:11"},{key:10,productId:"HWSZ010001",productName:"白色碳碳富盒挂件",productType:"其他类型",color:"雪白",productDetails:"布料: 羊毛 猫兔毛 14毛 101号; ...",deviceModel:"HWSZ002",ipName:"喵喵",creator:"42",createTime:"2026-4-13 19:25:11",updateTime:"2026-4-13 19:25:11"},{key:11,productId:"HWSZ011001",productName:"棕色碳碳富盒挂件",productType:"首盒挂件",color:"咖啡棕",productDetails:"布料: 棉 猫兔毛 12毛 102号; ...",deviceModel:"HWSZ003",ipName:"汪汪",creator:"43",createTime:"2026-5-13 19:25:11",updateTime:"2026-5-13 19:25:11"},{key:12,productId:"HWSZ012001",productName:"银色碳碳富盒挂件",productType:"次盒挂件",color:"银灰",productDetails:"布料: 丝 猫兔毛 15毛 103号; ...",deviceModel:"HWSZ004",ipName:"咩咩",creator:"44",createTime:"2026-6-13 19:25:11",updateTime:"2026-6-13 19:25:11"}];console.log("Raw Data:",_);const c=s({key:"all",label:"全部",value:"all"}),p=s({key:"all",label:"全部",value:"all"}),m=s({key:"all",label:"全部",value:"all"}),R=g(()=>{const l=Array.from(new Set(_.map(e=>e.deviceModel)));return[{key:"all",value:"all",label:"全部"},...l.map(e=>({key:e,value:e,label:e}))]}),J=g(()=>{const l=Array.from(new Set(_.map(e=>e.productType)));return[{key:"all",value:"all",label:"全部"},...l.map(e=>({key:e,value:e,label:e}))]}),V=g(()=>{const l=Array.from(new Set(_.map(e=>e.ipName)));return[{key:"all",value:"all",label:"全部"},...l.map(e=>({key:e,value:e,label:e}))]}),Q=l=>{c.value=!l||!l.value||l.value==="all"?{key:"all",label:"全部",value:"all"}:l},G=l=>{p.value=!l||!l.value||l.value==="all"?{key:"all",label:"全部",value:"all"}:l},X=l=>{m.value=!l||!l.value||l.value==="all"?{key:"all",label:"全部",value:"all"}:l},x=s(1),N=s(10);console.log("Initial deviceModelValue:",c.value);const k=s({columnKey:"updateTime",order:"descend"}),Y=g(()=>({total:_.length,current:x.value,pageSize:N.value,showSizeChanger:!0,pageSizeOptions:["10","20","50"],showTotal:(l,e)=>`第${e[0]}-${e[1]}条/共${l}条`,showQuickJumper:{goButton:"页"},onShowSizeChange:(l,e)=>{console.log("onShowSizeChange",l,e),x.value=l,N.value=e},onChange:(l,e)=>{console.log("onChange",l,e),x.value=l,N.value=e}})),ee=()=>{console.log("Refresh button clicked!"),D.value=!0,M.value="",x.value=1,A(),c.value={key:"all",label:"全部",value:"all"},p.value={key:"all",label:"全部",value:"all"},m.value={key:"all",label:"全部",value:"all"},setTimeout(()=>{D.value=!1},500)},P=g(()=>{var e;let l=[..._];if(M.value){const t=M.value.toLowerCase();l=l.filter(d=>Object.values(d).some(u=>typeof u=="string"&&u.toLowerCase().includes(t)))}if(c.value&&c.value.value!=="all"&&c.value.value!==""&&(l=l.filter(t=>t.deviceModel===c.value.value)),p.value&&p.value.value!=="all"&&p.value.value!==""&&(l=l.filter(t=>t.productType===p.value.value)),m.value&&m.value.value!=="all"&&m.value.value!==""&&(l=l.filter(t=>t.ipName===m.value.value)),k.value&&k.value.order){const{columnKey:t,order:d}=k.value,u=(e=y.find(b=>b.key===t))==null?void 0:e.sorter;u&&l.sort((b,C)=>{const w=u(b,C);return d==="ascend"?w:-w})}return l}),M=s(""),F=(l,e,t)=>{console.log("Table change:",l,e,t);const d=Array.isArray(t)?t[0]:t;d&&d.order?k.value={columnKey:d.columnKey,order:d.order}:k.value={columnKey:"updateTime",order:"descend"},x.value=1},le=()=>{console.log("Setting clicked")},D=s(!1),z=s("middle"),te=({key:l})=>{z.value=l},A=()=>{f.value=y.map(l=>l.key),h.value=y.map(l=>l.key)},ae=l=>{const{newIndex:e,oldIndex:t}=l,d=h.value[t],u=[...h.value];u.splice(t,1),u.splice(e,0,d),h.value=u},oe=(l,e)=>{e?f.value.includes(l)||f.value.push(l):f.value=f.value.filter(t=>t!==l)},H=s(!1),ne=g(()=>Array.from(new Set(_.map(l=>l.deviceModel)))),de=()=>{H.value=!1},ie=l=>{H.value=!1},W=s(!1),Z=s(null),U=l=>{Ne.info("开发中")},ue=()=>{W.value=!1,Z.value=null},se=l=>{W.value=!1,Z.value=null},I=s(!1),re=()=>{I.value=!0},ce=l=>{I.value=!1};return Te(()=>{f.value=y.map(l=>l.key)}),B({handleTableChange:F}),console.log("Selected deviceModel:",c.value.value),console.log("All versions for this model:",_.filter(l=>l.deviceModel===c.value.value).map(l=>l.versionNumber)),(l,e)=>{const t=r("a-select-option"),d=r("a-select"),u=r("a-tooltip"),b=r("a-input"),C=r("a-button"),w=r("a-menu-item"),pe=r("a-menu"),me=r("a-dropdown"),ve=r("a-checkbox"),ye=r("a-popover"),fe=r("a-divider"),_e=r("a-popconfirm"),ke=r("a-space"),ge=r("a-table"),he=r("a-config-provider");return $(),E(he,{locale:K.value,theme:{algorithm:S(He).defaultAlgorithm}},{default:o(()=>[e[20]||(e[20]=n("div",{class:"title-container"},[n("h2",null,"产品管理")],-1)),n("div",Pe,[n("div",Fe,[n("div",ze,[e[8]||(e[8]=n("span",{class:"select-always-placeholder"},"设备型号:",-1)),a(u,{title:c.value.label},{default:o(()=>[a(d,{value:c.value,"onUpdate:value":e[0]||(e[0]=i=>c.value=i),style:{width:"120px"},options:R.value,onChange:Q,allowClear:!0,"label-in-value":"",class:"device-model-select"},{default:o(()=>[a(t,{value:"all"},{default:o(()=>e[7]||(e[7]=[v("全部")])),_:1,__:[7]})]),_:1},8,["value","options"])]),_:1},8,["title"])]),n("div",Ae,[e[10]||(e[10]=n("span",{class:"select-always-placeholder"},"产品类型:",-1)),a(u,{title:p.value.label},{default:o(()=>[a(d,{value:p.value,"onUpdate:value":e[1]||(e[1]=i=>p.value=i),style:{width:"120px"},options:J.value,onChange:G,allowClear:!0,"label-in-value":"",class:"product-type-select"},{default:o(()=>[a(t,{value:"all"},{default:o(()=>e[9]||(e[9]=[v("全部")])),_:1,__:[9]})]),_:1},8,["value","options"])]),_:1},8,["title"])]),n("div",Ue,[e[12]||(e[12]=n("span",{class:"select-always-placeholder"},"IP名称:",-1)),a(u,{title:m.value.label},{default:o(()=>[a(d,{value:m.value,"onUpdate:value":e[2]||(e[2]=i=>m.value=i),style:{width:"120px"},options:V.value,onChange:X,allowClear:!0,"label-in-value":"",class:"ip-name-select"},{default:o(()=>[a(t,{value:"all"},{default:o(()=>e[11]||(e[11]=[v("全部")])),_:1,__:[11]})]),_:1},8,["value","options"])]),_:1},8,["title"])])]),n("div",Ee,[a(b,{value:M.value,"onUpdate:value":e[3]||(e[3]=i=>M.value=i),placeholder:"输入关键字搜索",style:{width:"200px"}},{prefix:o(()=>[a(S(Ce))]),_:1},8,["value"]),a(C,{type:"primary",onClick:re},{default:o(()=>e[13]||(e[13]=[v("新建产品")])),_:1,__:[13]}),a(S(we),{onClick:ee}),a(me,null,{overlay:o(()=>[a(pe,{onClick:te},{default:o(()=>[a(w,{key:"large"},{default:o(()=>e[14]||(e[14]=[v("宽松")])),_:1,__:[14]}),a(w,{key:"middle"},{default:o(()=>e[15]||(e[15]=[v("中等")])),_:1,__:[15]}),a(w,{key:"small"},{default:o(()=>e[16]||(e[16]=[v("紧凑")])),_:1,__:[16]})]),_:1})]),default:o(()=>[a(S(We),{onClick:e[4]||(e[4]=Se(()=>{},["prevent"]))})]),_:1}),a(ye,{trigger:"click",placement:"bottomRight"},{content:o(()=>[n("div",$e,[n("div",qe,[n("div",Be,[e[18]||(e[18]=n("span",null,"列展示",-1)),a(C,{type:"link",onClick:A},{default:o(()=>e[17]||(e[17]=[v("重置")])),_:1,__:[17]})]),a(S(Ze),{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=i=>h.value=i),"item-key":"key",onEnd:ae,class:"column-checkbox-group"},{item:o(({element:i})=>[n("div",Ke,[a(ve,{checked:f.value.includes(i),onChange:T=>oe(i,T.target.checked)},{default:o(()=>{var T;return[v(Me((T=y.find(O=>O.key===i))==null?void 0:T.title),1)]}),_:2},1032,["checked","onChange"])])]),_:1},8,["modelValue"])])])]),default:o(()=>[a(S(xe),{onClick:le})]),_:1})])]),n("div",je,[a(ge,{columns:L.value,"data-source":P.value,pagination:P.value.length===0?!1:Y.value,loading:D.value,size:z.value,scroll:{x:1e3},onChange:F,showSorterTooltip:!1,onEditRecord:U},{bodyCell:o(({column:i,record:T})=>[i.key==="operation"?($(),E(ke,{key:0,class:"action-cell",direction:"horizontal"},{default:o(()=>[n("a",{class:"edit-link",onClick:O=>U(T)},"编辑",8,Le),a(fe,{type:"vertical"}),a(_e,{title:"确定要删除该信息吗?",onConfirm:O=>l.$emit("delete-record",T)},{default:o(()=>e[19]||(e[19]=[n("a",{class:"danger-link"},"删除",-1)])),_:2,__:[19]},1032,["onConfirm"])]),_:2},1024)):Ie("",!0)]),_:1},8,["columns","data-source","pagination","loading","size"])]),a(Oe,{visible:H.value,uniqueDeviceModels:ne.value,"onUpdate:visible":de,onSubmit:ie},null,8,["visible","uniqueDeviceModels"]),a(Re,{visible:W.value,record:Z.value,"onUpdate:visible":ue,onSubmit:se},null,8,["visible","record"]),a(Ve,{visible:I.value,"onUpdate:visible":e[6]||(e[6]=i=>I.value=i),deviceModelOptions:R.value,ipNameOptions:V.value,onSubmit:ce},null,8,["visible","deviceModelOptions","ipNameOptions"])]),_:1,__:[20]},8,["locale","theme"])}}}),al=De(Je,[["__scopeId","data-v-54d447b7"]]);export{al as default};
