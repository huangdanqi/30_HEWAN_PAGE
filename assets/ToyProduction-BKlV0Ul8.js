import{d as Te,j as k,r as u,p as Me,k as Oe,i as j,w as a,l as x,f as i,o as L,b as n,e as t,g as c,S as Pe,R as Ve,m as Re,t as De,n as Ne,h as qe,_ as Be}from"./index-BCGmAcLz.js";import{l as H,t as Fe,C as $e,d as ze}from"./vuedraggable.umd-LclwGZ1c.js";import{F as Ae}from"./FirmwareReleaseModal-D5BAUaK-.js";import{F as Ue}from"./FirmwareEditModal-1htRelc7.js";import{_ as Ee}from"./ProductCreateModal.vue_vue_type_script_setup_true_lang-CD6vVGkN.js";import{S as Ke}from"./SettingOutlined-aohGgLY9.js";import"./InboxOutlined-Bj5fpIPV.js";const je={class:"top-controls-wrapper"},Le={class:"left-aligned-section"},He={class:"select-container product-name-select",style:{"margin-left":"10px"}},Je={class:"select-container manufacturer-select",style:{"margin-left":"10px"}},Qe={class:"right-aligned-icons"},We={class:"column-setting-panel",style:{"max-height":"300px","overflow-y":"auto"}},Ze={class:"setting-section"},Ge={class:"section-header",style:{display:"flex","justify-content":"space-between"}},Xe={class:"column-checkbox-item",style:{padding:"4px 0"}},Ye={class:"table-container"},el=["onClick"],ll=Te({__name:"ToyProduction",setup(tl,{expose:J}){const Q=k(()=>({...H,Pagination:{...H.Pagination,page:""}})),f=[{key:"rowIndex",title:"序号",dataIndex:"rowIndex",width:60,fixed:"left",customRender:({index:l})=>l+1},{key:"productId",title:"产品ID",dataIndex:"productId",width:120},{key:"productName",title:"产品名称",dataIndex:"productName",width:180},{key:"productionBatch",title:"生产批次",dataIndex:"productionBatch",width:120,sorter:(l,e)=>l.productionBatch.localeCompare(e.productionBatch),sortDirections:["ascend","descend"]},{key:"manufacturer",title:"生产厂家",dataIndex:"manufacturer",width:200},{key:"unitPrice",title:"单价(元)",dataIndex:"unitPrice",width:100,sorter:(l,e)=>l.unitPrice-e.unitPrice,sortDirections:["ascend","descend"]},{key:"quantity",title:"数量(个)",dataIndex:"quantity",width:100},{key:"totalPrice",title:"总价(元)",dataIndex:"totalPrice",width:120,sorter:(l,e)=>parseFloat(l.totalPrice.replace(/,/g,""))-parseFloat(e.totalPrice.replace(/,/g,"")),sortDirections:["ascend","descend"]},{key:"creator",title:"创建人",dataIndex:"creator",width:80},{key:"createTime",title:"创建时间",dataIndex:"createTime",width:160,sorter:(l,e)=>l.createTime.localeCompare(e.createTime),sortDirections:["ascend","descend"]},{key:"updateTime",title:"更新时间",dataIndex:"updateTime",width:160,sorter:(l,e)=>l.updateTime.localeCompare(e.updateTime),sortDirections:["ascend","descend"]},{key:"operation",title:"操作",dataIndex:"",width:100,fixed:"right"}],h=u(f.map(l=>l.key)),_=u(f.map(l=>l.key)),W=l=>l.map(e=>({title:e.title,dataIndex:e.dataIndex,key:e.key,width:e.width,fixed:e.fixed,sorter:e.sorter,sortDirections:e.sortDirections,sortOrder:y.value&&e.key===y.value.columnKey?y.value.order:void 0,defaultSortOrder:e.defaultSortOrder,customRender:e.customRender?e.customRender:({text:o})=>o==null||o===""?"-":o})),Z=k(()=>{const l=h.value.filter(o=>_.value.includes(o)).map(o=>f.find(d=>d.key===o)).filter(Boolean);return W(l).sort((o,d)=>{const r={left:1,undefined:2,right:3},p=r[o.fixed]||2,C=r[d.fixed]||2;return p-C})}),b=[];for(let l=0;l<12;l++)b.push({key:l+1,productId:"HWSZ00100"+(l%3+1),productName:["粉色碳碳富盒挂件","蓝色小熊玩偶","绿色恐龙模型"][l%3],productionBatch:"2025-06-"+(10+l),manufacturer:["扬州中韵工艺品有限公司","深圳乐高玩具厂","广州童趣玩具公司"][l%3],unitPrice:[25.8,30.5,18.2][l%3],quantity:[200,150,300][l%3],totalPrice:["5,160","4,575","5,460"][l%3],creator:["33","44","55"][l%3],createTime:"2025-7-13 19:25:"+(10+l),updateTime:"2025-7-13 19:30:"+(10+l),deviceModel:["A100","B200","C300"][l%3],productType:["益智","毛绒","模型"][l%3],ipName:["迪士尼","漫威","宝可梦"][l%3]});console.log("Raw Data:",b);const z=u({key:"all",label:"全部",value:"all"}),m=u({key:"all",label:"全部",value:"all"}),v=u({key:"all",label:"全部",value:"all"}),G=k(()=>{const l=Array.from(new Set(b.map(e=>e.deviceModel)));return[{key:"all",value:"all",label:"全部"},...l.map(e=>({key:e,value:e,label:e}))]}),X=k(()=>{const l=Array.from(new Set(b.map(e=>e.productName)));return[{key:"all",value:"all",label:"全部"},...l.map(e=>({key:e,value:e,label:e}))]}),Y=k(()=>{const l=Array.from(new Set(b.map(e=>e.manufacturer)));return[{key:"all",value:"all",label:"全部"},...l.map(e=>({key:e,value:e,label:e}))]}),ee=l=>{m.value=!l||!l.value||l.value==="all"?{key:"all",label:"全部",value:"all"}:l},le=l=>{v.value=!l||!l.value||l.value==="all"?{key:"all",label:"全部",value:"all"}:l},S=u(1),O=u(10);console.log("Initial deviceModelValue:",z.value);const y=u({columnKey:"updateTime",order:"descend"}),te=k(()=>({total:R.value.length,current:S.value,pageSize:O.value,showSizeChanger:!0,pageSizeOptions:["10","20","50"],showTotal:(l,e)=>`第${e[0]}-${e[1]}条/共${l}条`,showQuickJumper:{goButton:"页"},onShowSizeChange:(l,e)=>{console.log("onShowSizeChange",l,e),S.value=l,O.value=e},onChange:(l,e)=>{console.log("onChange",l,e),S.value=l,O.value=e}})),ae=()=>{console.log("Refresh button clicked!"),D.value=!0,M.value="",S.value=1,E(),z.value={key:"all",label:"全部",value:"all"},m.value={key:"all",label:"全部",value:"all"},v.value={key:"all",label:"全部",value:"all"},setTimeout(()=>{D.value=!1},500)},M=u(""),P=u("");let V=null;Me(M,l=>{V&&clearTimeout(V),V=setTimeout(()=>{P.value=l},300)});const R=k(()=>{var e;let l=[...b];if(P.value){const o=P.value.toLowerCase();l=l.filter(d=>Object.values(d).some(r=>typeof r=="string"&&r.toLowerCase().includes(o)))}if(m.value&&m.value.value!=="all"&&m.value.value!==""&&(l=l.filter(o=>o.productName===m.value.value)),v.value&&v.value.value!=="all"&&v.value.value!==""&&(l=l.filter(o=>o.manufacturer===v.value.value)),y.value&&y.value.order){const{columnKey:o,order:d}=y.value,r=(e=f.find(p=>p.key===o))==null?void 0:e.sorter;r&&l.sort((p,C)=>{const w=r(p,C);return d==="ascend"?w:-w})}return l}),A=(l,e,o)=>{console.log("Table change:",l,e,o);const d=Array.isArray(o)?o[0]:o;d&&d.order?y.value={columnKey:d.columnKey,order:d.order}:y.value={columnKey:"updateTime",order:"descend"},S.value=1},oe=()=>{console.log("Setting clicked")},D=u(!1),U=u("middle"),ne=({key:l})=>{U.value=l},E=()=>{_.value=f.map(l=>l.key),h.value=f.map(l=>l.key)},se=l=>{const{newIndex:e,oldIndex:o}=l,d=h.value[o],r=[...h.value];r.splice(o,1),r.splice(e,0,d),h.value=r},ie=(l,e)=>{e?_.value.includes(l)||_.value.push(l):_.value=_.value.filter(o=>o!==l)},N=u(!1),de=k(()=>Array.from(new Set(b.map(l=>l.deviceModel)))),ue=()=>{N.value=!1},re=l=>{N.value=!1},q=u(!1),B=u(null),K=l=>{qe.info("开发中")},ce=()=>{q.value=!1,B.value=null},pe=l=>{q.value=!1,B.value=null},F=u(!1),me=l=>{F.value=!1},I=u(!1),ve=()=>{I.value=!1};return Oe(()=>{_.value=f.map(l=>l.key)}),J({handleTableChange:A}),(l,e)=>{const o=i("a-select-option"),d=i("a-select"),r=i("a-tooltip"),p=i("a-input"),C=i("a-button"),w=i("a-menu-item"),fe=i("a-menu"),_e=i("a-dropdown"),ye=i("a-checkbox"),ke=i("a-popover"),he=i("a-divider"),be=i("a-popconfirm"),ge=i("a-space"),Ce=i("a-table"),T=i("a-form-item"),we=i("a-date-picker"),xe=i("a-form"),Se=i("a-modal"),Ie=i("a-config-provider");return L(),j(Ie,{locale:Q.value,theme:{algorithm:x(Fe).defaultAlgorithm}},{default:a(()=>[e[24]||(e[24]=n("div",{class:"title-container"},[n("h2",null,"玩具生产")],-1)),n("div",je,[n("div",Le,[n("div",He,[e[10]||(e[10]=n("span",{class:"select-always-placeholder"},"产品名称:",-1)),t(r,{title:m.value.label},{default:a(()=>[t(d,{value:m.value,"onUpdate:value":e[0]||(e[0]=s=>m.value=s),style:{width:"120px"},options:X.value,onChange:ee,allowClear:!0,"label-in-value":"",class:"product-name-select"},{default:a(()=>[t(o,{value:"all"},{default:a(()=>e[9]||(e[9]=[c("全部")])),_:1,__:[9]})]),_:1},8,["value","options"])]),_:1},8,["title"])]),n("div",Je,[e[12]||(e[12]=n("span",{class:"select-always-placeholder"},"生产厂家:",-1)),t(r,{title:v.value.label},{default:a(()=>[t(d,{value:v.value,"onUpdate:value":e[1]||(e[1]=s=>v.value=s),style:{width:"120px"},options:Y.value,onChange:le,allowClear:!0,"label-in-value":"",class:"manufacturer-select"},{default:a(()=>[t(o,{value:"all"},{default:a(()=>e[11]||(e[11]=[c("全部")])),_:1,__:[11]})]),_:1},8,["value","options"])]),_:1},8,["title"])])]),n("div",Qe,[t(p,{modelValue:M.value,"onUpdate:modelValue":e[2]||(e[2]=s=>M.value=s),placeholder:"输入关键字搜索",style:{width:"200px"}},{prefix:a(()=>[t(x(Pe))]),_:1},8,["modelValue"]),t(C,{type:"primary",onClick:e[3]||(e[3]=s=>I.value=!0)},{default:a(()=>e[13]||(e[13]=[c("新增批次")])),_:1,__:[13]}),t(x(Ve),{onClick:ae}),t(_e,null,{overlay:a(()=>[t(fe,{onClick:ne},{default:a(()=>[t(w,{key:"large"},{default:a(()=>e[14]||(e[14]=[c("宽松")])),_:1,__:[14]}),t(w,{key:"middle"},{default:a(()=>e[15]||(e[15]=[c("中等")])),_:1,__:[15]}),t(w,{key:"small"},{default:a(()=>e[16]||(e[16]=[c("紧凑")])),_:1,__:[16]})]),_:1})]),default:a(()=>[t(x($e),{onClick:e[4]||(e[4]=Re(()=>{},["prevent"]))})]),_:1}),t(ke,{trigger:"click",placement:"bottomRight"},{content:a(()=>[n("div",We,[n("div",Ze,[n("div",Ge,[e[18]||(e[18]=n("span",null,"列展示",-1)),t(C,{type:"link",onClick:E},{default:a(()=>e[17]||(e[17]=[c("重置")])),_:1,__:[17]})]),t(x(ze),{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=s=>h.value=s),"item-key":"key",onEnd:se,class:"column-checkbox-group"},{item:a(({element:s})=>[n("div",Xe,[t(ye,{checked:_.value.includes(s),onChange:g=>ie(s,g.target.checked)},{default:a(()=>{var g;return[c(De((g=f.find($=>$.key===s))==null?void 0:g.title),1)]}),_:2},1032,["checked","onChange"])])]),_:1},8,["modelValue"])])])]),default:a(()=>[t(x(Ke),{onClick:oe})]),_:1})])]),n("div",Ye,[t(Ce,{columns:Z.value,"data-source":R.value,pagination:R.value.length===0?!1:te.value,loading:D.value,size:U.value,scroll:{x:1e3},onChange:A,showSorterTooltip:!1,onEditRecord:K},{bodyCell:a(({column:s,record:g})=>[s.key==="operation"?(L(),j(ge,{key:0,class:"action-cell",direction:"horizontal"},{default:a(()=>[n("a",{class:"edit-link",onClick:$=>K(g)},"编辑",8,el),t(he,{type:"vertical"}),t(be,{title:"确定要删除该信息吗?",onConfirm:$=>l.$emit("delete-record",g)},{default:a(()=>e[19]||(e[19]=[n("a",{class:"danger-link"},"删除",-1)])),_:2,__:[19]},1032,["onConfirm"])]),_:2},1024)):Ne("",!0)]),_:1},8,["columns","data-source","pagination","loading","size"])]),t(Ae,{visible:N.value,uniqueDeviceModels:de.value,"onUpdate:visible":ue,onSubmit:re},null,8,["visible","uniqueDeviceModels"]),t(Ue,{visible:q.value,record:B.value,"onUpdate:visible":ce,onSubmit:pe},null,8,["visible","record"]),t(Ee,{visible:F.value,"onUpdate:visible":e[6]||(e[6]=s=>F.value=s),deviceModelOptions:G.value,ipNameOptions:[],onSubmit:me},null,8,["visible","deviceModelOptions"]),t(Se,{visible:I.value,"onUpdate:visible":e[7]||(e[7]=s=>I.value=s),title:"新增批次",onOk:ve,onCancel:e[8]||(e[8]=s=>I.value=!1),width:"400px"},{default:a(()=>[t(xe,{layout:"vertical"},{default:a(()=>[t(T,{required:""},{label:a(()=>e[20]||(e[20]=[n("span",{style:{color:"#ff4d4f"}},"*",-1),c(" 产品名称 ")])),default:a(()=>[t(d,{placeholder:"请选择"})]),_:1}),t(T,{required:""},{label:a(()=>e[21]||(e[21]=[n("span",{style:{color:"#ff4d4f"}},"*",-1),c(" 生产批次 ")])),default:a(()=>[t(we,{style:{width:"100%"},placeholder:"请选择"})]),_:1}),t(T,{label:"生产厂家"},{default:a(()=>[t(p,{placeholder:"请输入"})]),_:1}),t(T,{required:""},{label:a(()=>e[22]||(e[22]=[n("span",{style:{color:"#ff4d4f"}},"*",-1),c(" 单价 ")])),default:a(()=>[t(p,{suffix:"元",placeholder:"请输入"})]),_:1}),t(T,{required:""},{label:a(()=>e[23]||(e[23]=[n("span",{style:{color:"#ff4d4f"}},"*",-1),c(" 数量 ")])),default:a(()=>[t(p,{suffix:"个",placeholder:"请输入"})]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1,__:[24]},8,["locale","theme"])}}}),rl=Be(ll,[["__scopeId","data-v-b5e10f3a"]]);export{rl as default};
